!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.screenShooter=t.screenShooter||{})}(this,function(t){"use strict";function e(t){return t&&t.__esModule?t.default:t}function n(t,e){return e={exports:{}},t(e,e.exports),e.exports}function r(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=y(e),this.reject=y(n)}function a(t){throw new RangeError(Qr[t])}function o(t,e){for(var n=[],i=t.length;i--;)n[i]=e(t[i]);return n}function s(t,e){var n=t.split("@"),i="";return n.length>1&&(i=n[0]+"@",t=n[1]),i+o((t=t.replace(Jr,".")).split("."),e).join(".")}function l(t){for(var e=[],n=0,i=t.length;n<i;){var r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var a=t.charCodeAt(n++);56320==(64512&a)?e.push(((1023&r)<<10)+(1023&a)+65536):(e.push(r),n--)}else e.push(r)}return e}function u(t,e,n){return t.length>0?e+n.toUpperCase():t}function h(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function c(t,e){var n=t.find("svg");if(0!==n.length){t.find("g").removeAttr("clip-path"),t.find("g.c3-event-rects").remove(),t.find("g.c3-grid").remove(),t.find("g.c3-regions").remove(),t.find("g.c3-axis-y2").remove(),t.find("path.domain").attr("stroke-width",.5).css("stroke-width","0.2px");var i=(new XMLSerializer).serializeToString(n[0]);n.hide();var r=document.createElement("canvas");r.setAttribute("id","elcanvas"),t[0].appendChild(r),is("elcanvas",i,{ignoreMouse:!0,ignoreAnimation:!0,log:!0}),t.find(".laimg").remove();var a=new Image;a.className="laimg",t[0].appendChild(a),a.src=r.toDataURL(),t.find("#elcanvas").remove(),e&&e(a)}else e&&e()}function f(t,e){var n=t.find("svg");t.find("svg").css("font","10px sans-serif"),t.find("path").attr("fill","none"),t.find(".tick line, path.domain").attr("stroke","black"),t.find("canvas").remove();var i=t.find(".c3-tooltip-container").detach(),r=t.html().trim(),a=document.createElement("canvas");t[0].appendChild(a),n.hide(),t.append(i),is(a,r),e&&e(a)}function d(t){var e=t[0].cloneNode(!0),n=e.style;return n.position="relative",n["box-sizing"]="content-box",n.width=t.width()+"px",n.height=t.height()+"px",n.top=window.innerHeight+"px",n.left=0,document.body.appendChild(e),console.zdebug("poor clone",e),e}var p="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},m=n(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),g=n(function(t){var e=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=e)}),y=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},v=function(t,e,n){if(y(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}},b=function(t){return"object"==typeof t?null!==t:"function"==typeof t},w=function(t){if(!b(t))throw TypeError(t+" is not an object!");return t},x=function(t){try{return!!t()}catch(t){return!0}},E=!x(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),T=m.document,P=b(T)&&b(T.createElement),C=function(t){return P?T.createElement(t):{}},S=!E&&!x(function(){return 7!=Object.defineProperty(C("div"),"a",{get:function(){return 7}}).a}),O=function(t,e){if(!b(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!b(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!b(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!b(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},k=Object.defineProperty,I={f:E?Object.defineProperty:function(t,e,n){if(w(t),e=O(e,!0),w(n),S)try{return k(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},R=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},M=E?function(t,e,n){return I.f(t,e,R(1,n))}:function(t,e,n){return t[e]=n,t},A=function(t,e,n){var i,r,a,o=t&A.F,s=t&A.G,l=t&A.S,u=t&A.P,h=t&A.B,c=t&A.W,f=s?g:g[e]||(g[e]={}),d=f.prototype,p=s?m:l?m[e]:(m[e]||{}).prototype;s&&(n=e);for(i in n)(r=!o&&p&&void 0!==p[i])&&i in f||(a=r?p[i]:n[i],f[i]=s&&"function"!=typeof p[i]?n[i]:h&&r?v(a,m):c&&p[i]==a?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(a):u&&"function"==typeof a?v(Function.call,a):a,u&&((f.virtual||(f.virtual={}))[i]=a,t&A.R&&d&&!d[i]&&M(d,i,a)))};A.F=1,A.G=2,A.S=4,A.P=8,A.B=16,A.W=32,A.U=64,A.R=128;var N=A,B={}.hasOwnProperty,_=function(t,e){return B.call(t,e)},L={}.toString,V=function(t){return L.call(t).slice(8,-1)},D=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==V(t)?t.split(""):Object(t)},F=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},G=function(t){return D(F(t))},U=Math.ceil,W=Math.floor,X=function(t){return isNaN(t=+t)?0:(t>0?W:U)(t)},j=Math.min,z=function(t){return t>0?j(X(t),9007199254740991):0},H=Math.max,Y=Math.min,q=function(t,e){return(t=X(t))<0?H(t+e,0):Y(t,e)},K=m["__core-js_shared__"]||(m["__core-js_shared__"]={}),Z=function(t){return K[t]||(K[t]={})},J=0,Q=Math.random(),tt=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++J+Q).toString(36))},et=Z("keys"),nt=function(t){return et[t]||(et[t]=tt(t))},it=function(t){return function(e,n,i){var r,a=G(e),o=z(a.length),s=q(i,o);if(t&&n!=n){for(;o>s;)if((r=a[s++])!=r)return!0}else for(;o>s;s++)if((t||s in a)&&a[s]===n)return t||s||0;return!t&&-1}}(!1),rt=nt("IE_PROTO"),at=function(t,e){var n,i=G(t),r=0,a=[];for(n in i)n!=rt&&_(i,n)&&a.push(n);for(;e.length>r;)_(i,n=e[r++])&&(~it(a,n)||a.push(n));return a},ot="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),st=Object.keys||function(t){return at(t,ot)},lt={f:Object.getOwnPropertySymbols},ut={f:{}.propertyIsEnumerable},ht=function(t){return Object(F(t))},ct=Object.assign,ft=!ct||x(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=ct({},t)[n]||Object.keys(ct({},e)).join("")!=i})?function(t,e){for(var n=ht(t),i=arguments.length,r=1,a=lt.f,o=ut.f;i>r;)for(var s,l=D(arguments[r++]),u=a?st(l).concat(a(l)):st(l),h=u.length,c=0;h>c;)o.call(l,s=u[c++])&&(n[s]=l[s]);return n}:ct;N(N.S+N.F,"Object",{assign:ft});var dt=g.Object.assign,pt=n(function(t){t.exports={default:dt,__esModule:!0}});e(pt);var mt=e(n(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(pt);e.default=n.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}})),gt=M,yt={},vt=E?Object.defineProperties:function(t,e){w(t);for(var n,i=st(e),r=i.length,a=0;r>a;)I.f(t,n=i[a++],e[n]);return t},bt=m.document,wt=bt&&bt.documentElement,xt=nt("IE_PROTO"),Et=function(){},Tt=function(){var t,e=C("iframe"),n=ot.length;for(e.style.display="none",wt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Tt=t.F;n--;)delete Tt.prototype[ot[n]];return Tt()},Pt=Object.create||function(t,e){var n;return null!==t?(Et.prototype=w(t),n=new Et,Et.prototype=null,n[xt]=t):n=Tt(),void 0===e?n:vt(n,e)},Ct=n(function(t){var e=Z("wks"),n=m.Symbol,i="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=i&&n[t]||(i?n:tt)("Symbol."+t))}).store=e}),St=I.f,Ot=Ct("toStringTag"),kt=function(t,e,n){t&&!_(t=n?t:t.prototype,Ot)&&St(t,Ot,{configurable:!0,value:e})},It={};M(It,Ct("iterator"),function(){return this});var Rt=function(t,e,n){t.prototype=Pt(It,{next:R(1,n)}),kt(t,e+" Iterator")},Mt=nt("IE_PROTO"),At=Object.prototype,Nt=Object.getPrototypeOf||function(t){return t=ht(t),_(t,Mt)?t[Mt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?At:null},Bt=Ct("iterator"),_t=!([].keys&&"next"in[].keys()),Lt=function(){return this},Vt=function(t,e,n,i,r,a,o){Rt(n,e,i);var s,l,u,h=function(t){if(!_t&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},c=e+" Iterator",f="values"==r,d=!1,p=t.prototype,m=p[Bt]||p["@@iterator"]||r&&p[r],g=m||h(r),y=r?f?h("entries"):g:void 0,v="Array"==e?p.entries||m:m;if(v&&(u=Nt(v.call(new t)))!==Object.prototype&&u.next&&kt(u,c,!0),f&&m&&"values"!==m.name&&(d=!0,g=function(){return m.call(this)}),o&&(_t||d||!p[Bt])&&M(p,Bt,g),yt[e]=g,yt[c]=Lt,r)if(s={values:f?g:h("values"),keys:a?g:h("keys"),entries:y},o)for(l in s)l in p||gt(p,l,s[l]);else N(N.P+N.F*(_t||d),e,s);return s},Dt=function(t){return function(e,n){var i,r,a=String(F(e)),o=X(n),s=a.length;return o<0||o>=s?t?"":void 0:(i=a.charCodeAt(o))<55296||i>56319||o+1===s||(r=a.charCodeAt(o+1))<56320||r>57343?t?a.charAt(o):i:t?a.slice(o,o+2):r-56320+(i-55296<<10)+65536}}(!0);Vt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=Dt(e,n),this._i+=t.length,{value:t,done:!1})});var Ft=function(t,e){return{value:e,done:!!t}};Vt(Array,"Array",function(t,e){this._t=G(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Ft(1)):"keys"==e?Ft(0,n):"values"==e?Ft(0,t[n]):Ft(0,[n,t[n]])},"values");yt.Arguments=yt.Array;for(var Gt=Ct("toStringTag"),Ut="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Wt=0;Wt<Ut.length;Wt++){var Xt=Ut[Wt],jt=m[Xt],zt=jt&&jt.prototype;zt&&!zt[Gt]&&M(zt,Gt,Xt),yt[Xt]=yt.Array}var Ht={f:Ct},Yt=Ht.f("iterator"),qt=n(function(t){t.exports={default:Yt,__esModule:!0}});e(qt);var $t=n(function(t){var e=tt("meta"),n=I.f,i=0,r=Object.isExtensible||function(){return!0},a=!x(function(){return r(Object.preventExtensions({}))}),o=function(t){n(t,e,{value:{i:"O"+ ++i,w:{}}})},s=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!b(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!_(t,e)){if(!r(t))return"F";if(!n)return"E";o(t)}return t[e].i},getWeak:function(t,n){if(!_(t,e)){if(!r(t))return!0;if(!n)return!1;o(t)}return t[e].w},onFreeze:function(t){return a&&s.NEED&&r(t)&&!_(t,e)&&o(t),t}}}),Kt=I.f,Zt=function(t){var e=g.Symbol||(g.Symbol={});"_"==t.charAt(0)||t in e||Kt(e,t,{value:Ht.f(t)})},Jt=function(t){var e=st(t),n=lt.f;if(n)for(var i,r=n(t),a=ut.f,o=0;r.length>o;)a.call(t,i=r[o++])&&e.push(i);return e},Qt=Array.isArray||function(t){return"Array"==V(t)},te=ot.concat("length","prototype"),ee={f:Object.getOwnPropertyNames||function(t){return at(t,te)}},ne=ee.f,ie={}.toString,re="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ae=function(t){try{return ne(t)}catch(t){return re.slice()}},oe={f:function(t){return re&&"[object Window]"==ie.call(t)?ae(t):ne(G(t))}},se=Object.getOwnPropertyDescriptor,le={f:E?se:function(t,e){if(t=G(t),e=O(e,!0),S)try{return se(t,e)}catch(t){}if(_(t,e))return R(!ut.f.call(t,e),t[e])}},ue=$t.KEY,he=le.f,ce=I.f,fe=oe.f,de=m.Symbol,pe=m.JSON,me=pe&&pe.stringify,ge=Ct("_hidden"),ye=Ct("toPrimitive"),ve={}.propertyIsEnumerable,be=Z("symbol-registry"),we=Z("symbols"),xe=Z("op-symbols"),Ee=Object.prototype,Te="function"==typeof de,Pe=m.QObject,Ce=!Pe||!Pe.prototype||!Pe.prototype.findChild,Se=E&&x(function(){return 7!=Pt(ce({},"a",{get:function(){return ce(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=he(Ee,e);i&&delete Ee[e],ce(t,e,n),i&&t!==Ee&&ce(Ee,e,i)}:ce,Oe=function(t){var e=we[t]=Pt(de.prototype);return e._k=t,e},ke=Te&&"symbol"==typeof de.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof de},Ie=function(t,e,n){return t===Ee&&Ie(xe,e,n),w(t),e=O(e,!0),w(n),_(we,e)?(n.enumerable?(_(t,ge)&&t[ge][e]&&(t[ge][e]=!1),n=Pt(n,{enumerable:R(0,!1)})):(_(t,ge)||ce(t,ge,R(1,{})),t[ge][e]=!0),Se(t,e,n)):ce(t,e,n)},Re=function(t,e){w(t);for(var n,i=Jt(e=G(e)),r=0,a=i.length;a>r;)Ie(t,n=i[r++],e[n]);return t},Me=function(t){var e=ve.call(this,t=O(t,!0));return!(this===Ee&&_(we,t)&&!_(xe,t))&&(!(e||!_(this,t)||!_(we,t)||_(this,ge)&&this[ge][t])||e)},Ae=function(t,e){if(t=G(t),e=O(e,!0),t!==Ee||!_(we,e)||_(xe,e)){var n=he(t,e);return!n||!_(we,e)||_(t,ge)&&t[ge][e]||(n.enumerable=!0),n}},Ne=function(t){for(var e,n=fe(G(t)),i=[],r=0;n.length>r;)_(we,e=n[r++])||e==ge||e==ue||i.push(e);return i},Be=function(t){for(var e,n=t===Ee,i=fe(n?xe:G(t)),r=[],a=0;i.length>a;)!_(we,e=i[a++])||n&&!_(Ee,e)||r.push(we[e]);return r};Te||(gt((de=function(){if(this instanceof de)throw TypeError("Symbol is not a constructor!");var t=tt(arguments.length>0?arguments[0]:void 0),e=function(n){this===Ee&&e.call(xe,n),_(this,ge)&&_(this[ge],t)&&(this[ge][t]=!1),Se(this,t,R(1,n))};return E&&Ce&&Se(Ee,t,{configurable:!0,set:e}),Oe(t)}).prototype,"toString",function(){return this._k}),le.f=Ae,I.f=Ie,ee.f=oe.f=Ne,ut.f=Me,lt.f=Be,Ht.f=function(t){return Oe(Ct(t))}),N(N.G+N.W+N.F*!Te,{Symbol:de});for(var _e="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Le=0;_e.length>Le;)Ct(_e[Le++]);for(var Ve=st(Ct.store),De=0;Ve.length>De;)Zt(Ve[De++]);N(N.S+N.F*!Te,"Symbol",{for:function(t){return _(be,t+="")?be[t]:be[t]=de(t)},keyFor:function(t){if(!ke(t))throw TypeError(t+" is not a symbol!");for(var e in be)if(be[e]===t)return e},useSetter:function(){Ce=!0},useSimple:function(){Ce=!1}}),N(N.S+N.F*!Te,"Object",{create:function(t,e){return void 0===e?Pt(t):Re(Pt(t),e)},defineProperty:Ie,defineProperties:Re,getOwnPropertyDescriptor:Ae,getOwnPropertyNames:Ne,getOwnPropertySymbols:Be}),pe&&N(N.S+N.F*(!Te||x(function(){var t=de();return"[null]"!=me([t])||"{}"!=me({a:t})||"{}"!=me(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!ke(t)){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);return"function"==typeof(e=i[1])&&(n=e),!n&&Qt(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!ke(e))return e}),i[1]=e,me.apply(pe,i)}}}),de.prototype[ye]||M(de.prototype,ye,de.prototype.valueOf),kt(de,"Symbol"),kt(Math,"Math",!0),kt(m.JSON,"JSON",!0),Zt("asyncIterator"),Zt("observable");var Fe=g.Symbol,Ge=n(function(t){t.exports={default:Fe,__esModule:!0}});e(Ge);var Ue,We,Xe,je=e(n(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(qt),r=n(Ge),a="function"==typeof r.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":typeof t};e.default="function"==typeof r.default&&"symbol"===a(i.default)?function(t){return void 0===t?"undefined":a(t)}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":void 0===t?"undefined":a(t)}})),ze=Ct("toStringTag"),He="Arguments"==V(function(){return arguments}()),Ye=function(t,e){try{return t[e]}catch(t){}},qe=function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=Ye(e=Object(t),ze))?n:He?V(e):"Object"==(i=V(e))&&"function"==typeof e.callee?"Arguments":i},$e=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t},Ke=function(t,e,n,i){try{return i?e(w(n)[0],n[1]):e(n)}catch(e){var r=t.return;throw void 0!==r&&w(r.call(t)),e}},Ze=Ct("iterator"),Je=Array.prototype,Qe=function(t){return void 0!==t&&(yt.Array===t||Je[Ze]===t)},tn=Ct("iterator"),en=g.getIteratorMethod=function(t){if(void 0!=t)return t[tn]||t["@@iterator"]||yt[qe(t)]},nn=n(function(t){var e={},n={},i=t.exports=function(t,i,r,a,o){var s,l,u,h,c=o?function(){return t}:en(t),f=v(r,a,i?2:1),d=0;if("function"!=typeof c)throw TypeError(t+" is not iterable!");if(Qe(c)){for(s=z(t.length);s>d;d++)if((h=i?f(w(l=t[d])[0],l[1]):f(t[d]))===e||h===n)return h}else for(u=c.call(t);!(l=u.next()).done;)if((h=Ke(u,f,l.value,i))===e||h===n)return h};i.BREAK=e,i.RETURN=n}),rn=Ct("species"),an=function(t,e){var n,i=w(t).constructor;return void 0===i||void 0==(n=w(i)[rn])?e:y(n)},on=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},sn=m.process,ln=m.setImmediate,un=m.clearImmediate,hn=m.MessageChannel,cn=m.Dispatch,fn=0,dn={},pn=function(){var t=+this;if(dn.hasOwnProperty(t)){var e=dn[t];delete dn[t],e()}},mn=function(t){pn.call(t.data)};ln&&un||(ln=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return dn[++fn]=function(){on("function"==typeof t?t:Function(t),e)},Ue(fn),fn},un=function(t){delete dn[t]},"process"==V(sn)?Ue=function(t){sn.nextTick(v(pn,t,1))}:cn&&cn.now?Ue=function(t){cn.now(v(pn,t,1))}:hn?(Xe=(We=new hn).port2,We.port1.onmessage=mn,Ue=v(Xe.postMessage,Xe,1)):m.addEventListener&&"function"==typeof postMessage&&!m.importScripts?(Ue=function(t){m.postMessage(t+"","*")},m.addEventListener("message",mn,!1)):Ue="onreadystatechange"in C("script")?function(t){wt.appendChild(C("script")).onreadystatechange=function(){wt.removeChild(this),pn.call(t)}}:function(t){setTimeout(v(pn,t,1),0)});var gn={set:ln,clear:un},yn=gn.set,vn=m.MutationObserver||m.WebKitMutationObserver,bn=m.process,wn=m.Promise,xn="process"==V(bn),En={f:function(t){return new r(t)}},Tn=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Pn=function(t,e){if(w(t),b(e)&&e.constructor===t)return e;var n=En.f(t);return(0,n.resolve)(e),n.promise},Cn=Ct("species"),Sn=Ct("iterator"),On=!1;try{[7][Sn]().return=function(){On=!0}}catch(t){}var kn,In,Rn,Mn,An=gn.set,Nn=function(){var t,e,n,i=function(){var i,r;for(xn&&(i=bn.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(xn)n=function(){bn.nextTick(i)};else if(vn){var r=!0,a=document.createTextNode("");new vn(i).observe(a,{characterData:!0}),n=function(){a.data=r=!r}}else if(wn&&wn.resolve){var o=wn.resolve();n=function(){o.then(i)}}else n=function(){yn.call(m,i)};return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}(),Bn=m.TypeError,_n=m.process,Ln=m.Promise,Vn="process"==qe(_n),Dn=function(){},Fn=In=En.f,Gn=!!function(){try{var t=Ln.resolve(1),e=(t.constructor={})[Ct("species")]=function(t){t(Dn,Dn)};return(Vn||"function"==typeof PromiseRejectionEvent)&&t.then(Dn)instanceof e}catch(t){}}(),Un=function(t){var e;return!(!b(t)||"function"!=typeof(e=t.then))&&e},Wn=function(t,e){if(!t._n){t._n=!0;var n=t._c;Nn(function(){for(var i=t._v,r=1==t._s,a=0;n.length>a;)!function(e){var n,a,o=r?e.ok:e.fail,s=e.resolve,l=e.reject,u=e.domain;try{o?(r||(2==t._h&&zn(t),t._h=1),!0===o?n=i:(u&&u.enter(),n=o(i),u&&u.exit()),n===e.promise?l(Bn("Promise-chain cycle")):(a=Un(n))?a.call(n,s,l):s(n)):l(i)}catch(t){l(t)}}(n[a++]);t._c=[],t._n=!1,e&&!t._h&&Xn(t)})}},Xn=function(t){An.call(m,function(){var e,n,i,r=t._v,a=jn(t);if(a&&(e=Tn(function(){Vn?_n.emit("unhandledRejection",r,t):(n=m.onunhandledrejection)?n({promise:t,reason:r}):(i=m.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=Vn||jn(t)?2:1),t._a=void 0,a&&e.e)throw e.v})},jn=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,i=0;n.length>i;)if((e=n[i++]).fail||!jn(e.promise))return!1;return!0},zn=function(t){An.call(m,function(){var e;Vn?_n.emit("rejectionHandled",t):(e=m.onrejectionhandled)&&e({promise:t,reason:t._v})})},Hn=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Wn(e,!0))},Yn=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw Bn("Promise can't be resolved itself");(e=Un(t))?Nn(function(){var i={_w:n,_d:!1};try{e.call(t,v(Yn,i,1),v(Hn,i,1))}catch(t){Hn.call(i,t)}}):(n._v=t,n._s=1,Wn(n,!1))}catch(t){Hn.call({_w:n,_d:!1},t)}}};Gn||(Ln=function(t){$e(this,Ln,"Promise","_h"),y(t),kn.call(this);try{t(v(Yn,this,1),v(Hn,this,1))}catch(t){Hn.call(this,t)}},(kn=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:M(t,i,e[i]);return t}(Ln.prototype,{then:function(t,e){var n=Fn(an(this,Ln));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=Vn?_n.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Wn(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Rn=function(){var t=new kn;this.promise=t,this.resolve=v(Yn,t,1),this.reject=v(Hn,t,1)},En.f=Fn=function(t){return t===Ln||t===Mn?new Rn(t):In(t)}),N(N.G+N.W+N.F*!Gn,{Promise:Ln}),kt(Ln,"Promise"),function(t){var e="function"==typeof g[t]?g[t]:m[t];E&&e&&!e[Cn]&&I.f(e,Cn,{configurable:!0,get:function(){return this}})}("Promise"),Mn=g.Promise,N(N.S+N.F*!Gn,"Promise",{reject:function(t){var e=Fn(this);return(0,e.reject)(t),e.promise}}),N(N.S+!0*N.F,"Promise",{resolve:function(t){return Pn(this===Mn?Ln:this,t)}}),N(N.S+N.F*!(Gn&&function(t,e){if(!e&&!On)return!1;var n=!1;try{var i=[7],r=i[Sn]();r.next=function(){return{done:n=!0}},i[Sn]=function(){return r},t(i)}catch(t){}return n}(function(t){Ln.all(t).catch(Dn)})),"Promise",{all:function(t){var e=this,n=Fn(e),i=n.resolve,r=n.reject,a=Tn(function(){var n=[],a=0,o=1;nn(t,!1,function(t){var s=a++,l=!1;n.push(void 0),o++,e.resolve(t).then(function(t){l||(l=!0,n[s]=t,--o||i(n))},r)}),--o||i(n)});return a.e&&r(a.v),n.promise},race:function(t){var e=this,n=Fn(e),i=n.reject,r=Tn(function(){nn(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}}),N(N.P+N.R,"Promise",{finally:function(t){var e=an(this,g.Promise||m.Promise),n="function"==typeof t;return this.then(n?function(n){return Pn(e,t()).then(function(){return n})}:t,n?function(n){return Pn(e,t()).then(function(){throw n})}:t)}}),N(N.S,"Promise",{try:function(t){var e=En.f(this),n=Tn(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var qn=g.Promise,$n=e(n(function(t){t.exports={default:qn,__esModule:!0}})),Kn=e(n(function(t,e){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}}));N(N.S+N.F*!E,"Object",{defineProperty:I.f});var Zn=g.Object,Jn=function(t,e,n){return Zn.defineProperty(t,e,n)},Qn=n(function(t){t.exports={default:Jn,__esModule:!0}});e(Qn);var ti=e(n(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(Qn);e.default=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,n.default)(t,r.key,r)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()})),ei={VECTOR:0,BEZIER_CURVE:1,CIRCLE:2},ni=Ct("iterator"),ii=g.isIterable=function(t){var e=Object(t);return void 0!==e[ni]||"@@iterator"in e||yt.hasOwnProperty(qe(e))},ri=n(function(t){t.exports={default:ii,__esModule:!0}});e(ri);var ai=g.getIterator=function(t){var e=en(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return w(e.call(t))},oi=n(function(t){t.exports={default:ai,__esModule:!0}});e(oi);var si=e(n(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(ri),r=n(oi);e.default=function(){function t(t,e){var n=[],i=!0,a=!1,o=void 0;try{for(var s,l=(0,r.default)(t);!(i=(s=l.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){a=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(a)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,i.default)(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()})),li=/^#([a-f0-9]{3})$/i,ui=function(t){var e=t.match(li);return!!e&&[parseInt(e[1][0]+e[1][0],16),parseInt(e[1][1]+e[1][1],16),parseInt(e[1][2]+e[1][2],16),null]},hi=/^#([a-f0-9]{6})$/i,ci=function(t){var e=t.match(hi);return!!e&&[parseInt(e[1].substring(0,2),16),parseInt(e[1].substring(2,4),16),parseInt(e[1].substring(4,6),16),null]},fi=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,di=function(t){var e=t.match(fi);return!!e&&[Number(e[1]),Number(e[2]),Number(e[3]),null]},pi=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/,mi=function(t){var e=t.match(pi);return!!(e&&e.length>4)&&[Number(e[1]),Number(e[2]),Number(e[3]),Number(e[4])]},gi=function(t){return[Math.min(t[0],255),Math.min(t[1],255),Math.min(t[2],255),t.length>3?t[3]:null]},yi=function(t){var e=bi[t.toLowerCase()];return e||!1},vi=function(){function t(e){Kn(this,t);var n=Array.isArray(e)?gi(e):ui(e)||di(e)||mi(e)||yi(e)||ci(e)||[0,0,0,null],i=si(n,4),r=i[0],a=i[1],o=i[2],s=i[3];this.r=r,this.g=a,this.b=o,this.a=s}return ti(t,[{key:"isTransparent",value:function(){return 0===this.a}},{key:"toString",value:function(){return null!==this.a&&1!==this.a?"rgba("+this.r+","+this.g+","+this.b+","+this.a+")":"rgb("+this.r+","+this.g+","+this.b+")"}}]),t}(),bi={transparent:[0,0,0,0],aliceblue:[240,248,255,null],antiquewhite:[250,235,215,null],aqua:[0,255,255,null],aquamarine:[127,255,212,null],azure:[240,255,255,null],beige:[245,245,220,null],bisque:[255,228,196,null],black:[0,0,0,null],blanchedalmond:[255,235,205,null],blue:[0,0,255,null],blueviolet:[138,43,226,null],brown:[165,42,42,null],burlywood:[222,184,135,null],cadetblue:[95,158,160,null],chartreuse:[127,255,0,null],chocolate:[210,105,30,null],coral:[255,127,80,null],cornflowerblue:[100,149,237,null],cornsilk:[255,248,220,null],crimson:[220,20,60,null],cyan:[0,255,255,null],darkblue:[0,0,139,null],darkcyan:[0,139,139,null],darkgoldenrod:[184,134,11,null],darkgray:[169,169,169,null],darkgreen:[0,100,0,null],darkgrey:[169,169,169,null],darkkhaki:[189,183,107,null],darkmagenta:[139,0,139,null],darkolivegreen:[85,107,47,null],darkorange:[255,140,0,null],darkorchid:[153,50,204,null],darkred:[139,0,0,null],darksalmon:[233,150,122,null],darkseagreen:[143,188,143,null],darkslateblue:[72,61,139,null],darkslategray:[47,79,79,null],darkslategrey:[47,79,79,null],darkturquoise:[0,206,209,null],darkviolet:[148,0,211,null],deeppink:[255,20,147,null],deepskyblue:[0,191,255,null],dimgray:[105,105,105,null],dimgrey:[105,105,105,null],dodgerblue:[30,144,255,null],firebrick:[178,34,34,null],floralwhite:[255,250,240,null],forestgreen:[34,139,34,null],fuchsia:[255,0,255,null],gainsboro:[220,220,220,null],ghostwhite:[248,248,255,null],gold:[255,215,0,null],goldenrod:[218,165,32,null],gray:[128,128,128,null],green:[0,128,0,null],greenyellow:[173,255,47,null],grey:[128,128,128,null],honeydew:[240,255,240,null],hotpink:[255,105,180,null],indianred:[205,92,92,null],indigo:[75,0,130,null],ivory:[255,255,240,null],khaki:[240,230,140,null],lavender:[230,230,250,null],lavenderblush:[255,240,245,null],lawngreen:[124,252,0,null],lemonchiffon:[255,250,205,null],lightblue:[173,216,230,null],lightcoral:[240,128,128,null],lightcyan:[224,255,255,null],lightgoldenrodyellow:[250,250,210,null],lightgray:[211,211,211,null],lightgreen:[144,238,144,null],lightgrey:[211,211,211,null],lightpink:[255,182,193,null],lightsalmon:[255,160,122,null],lightseagreen:[32,178,170,null],lightskyblue:[135,206,250,null],lightslategray:[119,136,153,null],lightslategrey:[119,136,153,null],lightsteelblue:[176,196,222,null],lightyellow:[255,255,224,null],lime:[0,255,0,null],limegreen:[50,205,50,null],linen:[250,240,230,null],magenta:[255,0,255,null],maroon:[128,0,0,null],mediumaquamarine:[102,205,170,null],mediumblue:[0,0,205,null],mediumorchid:[186,85,211,null],mediumpurple:[147,112,219,null],mediumseagreen:[60,179,113,null],mediumslateblue:[123,104,238,null],mediumspringgreen:[0,250,154,null],mediumturquoise:[72,209,204,null],mediumvioletred:[199,21,133,null],midnightblue:[25,25,112,null],mintcream:[245,255,250,null],mistyrose:[255,228,225,null],moccasin:[255,228,181,null],navajowhite:[255,222,173,null],navy:[0,0,128,null],oldlace:[253,245,230,null],olive:[128,128,0,null],olivedrab:[107,142,35,null],orange:[255,165,0,null],orangered:[255,69,0,null],orchid:[218,112,214,null],palegoldenrod:[238,232,170,null],palegreen:[152,251,152,null],paleturquoise:[175,238,238,null],palevioletred:[219,112,147,null],papayawhip:[255,239,213,null],peachpuff:[255,218,185,null],peru:[205,133,63,null],pink:[255,192,203,null],plum:[221,160,221,null],powderblue:[176,224,230,null],purple:[128,0,128,null],rebeccapurple:[102,51,153,null],red:[255,0,0,null],rosybrown:[188,143,143,null],royalblue:[65,105,225,null],saddlebrown:[139,69,19,null],salmon:[250,128,114,null],sandybrown:[244,164,96,null],seagreen:[46,139,87,null],seashell:[255,245,238,null],sienna:[160,82,45,null],silver:[192,192,192,null],skyblue:[135,206,235,null],slateblue:[106,90,205,null],slategray:[112,128,144,null],slategrey:[112,128,144,null],snow:[255,250,250,null],springgreen:[0,255,127,null],steelblue:[70,130,180,null],tan:[210,180,140,null],teal:[0,128,128,null],thistle:[216,191,216,null],tomato:[255,99,71,null],turquoise:[64,224,208,null],violet:[238,130,238,null],wheat:[245,222,179,null],white:[255,255,255,null],whitesmoke:[245,245,245,null],yellow:[255,255,0,null],yellowgreen:[154,205,50,null]},wi=new vi([0,0,0,0]),xi={SOLID:0,DOUBLE:1,DOTTED:2,DASHED:3,WAVY:4},Ei={NONE:null},Ti={UNDERLINE:1,OVERLINE:2,LINE_THROUGH:3,BLINK:4},Pi=function(t){switch(t){case"underline":return Ti.UNDERLINE;case"overline":return Ti.OVERLINE;case"line-through":return Ti.LINE_THROUGH}return Ti.BLINK},Ci=function(t){return"none"===t?null:t.split(" ").map(Pi)},Si=function(t){switch(t){case"double":return xi.DOUBLE;case"dotted":return xi.DOTTED;case"dashed":return xi.DASHED;case"wavy":return xi.WAVY}return xi.SOLID},Oi=function(t){var e=Ci(t.textDecorationLine?t.textDecorationLine:t.textDecoration);return null===e?Ei.NONE:{textDecorationLine:e,textDecorationColor:t.textDecorationColor?new vi(t.textDecorationColor):null,textDecorationStyle:Si(t.textDecorationStyle)}},ki=function(){function t(e){Kn(this,t),this.canvas=e||document.createElement("canvas")}return ti(t,[{key:"render",value:function(t){this.ctx=this.canvas.getContext("2d"),this.options=t,this.canvas.width=Math.floor(t.width*t.scale),this.canvas.height=Math.floor(t.height*t.scale),this.canvas.style.width=t.width+"px",this.canvas.style.height=t.height+"px",this.ctx.scale(this.options.scale,this.options.scale),this.ctx.textBaseline="bottom",t.logger.log("Canvas renderer initialized with scale "+this.options.scale)}},{key:"clip",value:function(t,e){var n=this;t.length&&(this.ctx.save(),t.forEach(function(t){n.path(t),n.ctx.clip()})),e(),t.length&&this.ctx.restore()}},{key:"drawImage",value:function(t,e,n){this.ctx.drawImage(t,e.left,e.top,e.width,e.height,n.left,n.top,n.width,n.height)}},{key:"drawShape",value:function(t,e){this.path(t),this.ctx.fillStyle=e.toString(),this.ctx.fill()}},{key:"fill",value:function(t){this.ctx.fillStyle=t.toString(),this.ctx.fill()}},{key:"getTarget",value:function(){return $n.resolve(this.canvas)}},{key:"path",value:function(t){var e=this;this.ctx.beginPath(),Array.isArray(t)?t.forEach(function(t,n){var i=t.type===ei.VECTOR?t:t.start;0===n?e.ctx.moveTo(i.x,i.y):e.ctx.lineTo(i.x,i.y),t.type===ei.BEZIER_CURVE&&e.ctx.bezierCurveTo(t.startControl.x,t.startControl.y,t.endControl.x,t.endControl.y,t.end.x,t.end.y)}):this.ctx.arc(t.x+t.radius,t.y+t.radius,t.radius,0,2*Math.PI,!0),this.ctx.closePath()}},{key:"rectangle",value:function(t,e,n,i,r){this.ctx.fillStyle=r.toString(),this.ctx.fillRect(t,e,n,i)}},{key:"renderLinearGradient",value:function(t,e){var n=this.ctx.createLinearGradient(t.left+e.direction.x1,t.top+e.direction.y1,t.left+e.direction.x0,t.top+e.direction.y0);e.colorStops.forEach(function(t){n.addColorStop(t.stop,t.color.toString())}),this.ctx.fillStyle=n,this.ctx.fillRect(t.left,t.top,t.width,t.height)}},{key:"renderRepeat",value:function(t,e,n,i,r){this.path(t),this.ctx.fillStyle=this.ctx.createPattern(this.resizeImage(e,n),"repeat"),this.ctx.translate(i,r),this.ctx.fill(),this.ctx.translate(-i,-r)}},{key:"renderTextNode",value:function(t,e,n,i,r){var a=this;this.ctx.font=[n.fontStyle,n.fontVariant,n.fontWeight,n.fontSize,n.fontFamily].join(" ").split(",")[0],t.forEach(function(t){if(a.ctx.fillStyle=e.toString(),r&&t.text.trim().length?r.slice(0).reverse().forEach(function(e){a.ctx.shadowColor=e.color.toString(),a.ctx.shadowOffsetX=e.offsetX*a.options.scale,a.ctx.shadowOffsetY=e.offsetY*a.options.scale,a.ctx.shadowBlur=e.blur,a.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height)}):a.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height),null!==i){var o=i.textDecorationColor||e;i.textDecorationLine.forEach(function(e){switch(e){case Ti.UNDERLINE:var i=a.options.fontMetrics.getMetrics(n).baseline;a.rectangle(t.bounds.left,Math.round(t.bounds.top+i),t.bounds.width,1,o);break;case Ti.OVERLINE:a.rectangle(t.bounds.left,Math.round(t.bounds.top),t.bounds.width,1,o);break;case Ti.LINE_THROUGH:var r=a.options.fontMetrics.getMetrics(n).middle;a.rectangle(t.bounds.left,Math.ceil(t.bounds.top+r),t.bounds.width,1,o)}})}})}},{key:"resizeImage",value:function(t,e){if(t.width===e.width&&t.height===e.height)return t;var n=this.canvas.ownerDocument.createElement("canvas");return n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,e.width,e.height),n}},{key:"setOpacity",value:function(t){this.ctx.globalAlpha=t}},{key:"transform",value:function(t,e,n,i){this.ctx.save(),this.ctx.translate(t,e),this.ctx.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.ctx.translate(-t,-e),i(),this.ctx.restore()}}]),t}(),Ii=function(){function t(e,n){Kn(this,t),this.start=n||Date.now(),this.id=e}return ti(t,[{key:"child",value:function(e){return new t(e,this.start)}},{key:"log",value:function(){if(window.console&&window.console.log){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(e,0)))}}},{key:"error",value:function(){if(window.console&&window.console.error){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];Function.prototype.bind.call(window.console.error,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(e,0)))}}}]),t}(),Ri=function(t,e){return 0!=(t&e)},Mi=function(t,e){for(var n=t.length-1;n>=0;n--){var i=t.item(n);"content"!==i&&e.style.setProperty(i,t.getPropertyValue(i))}return e},Ai={PX:0,PERCENTAGE:1},Ni=function(){function t(e){Kn(this,t),this.type="%"===e.substr(e.length-1)?Ai.PERCENTAGE:Ai.PX;var n=parseFloat(e);this.value=isNaN(n)?0:n}return ti(t,[{key:"isPercentage",value:function(){return this.type===Ai.PERCENTAGE}},{key:"getAbsoluteValue",value:function(t){return this.isPercentage()?t*(this.value/100):this.value}}],[{key:"create",value:function(e){return new t(e)}}]),t}(),Bi=function t(e,n){Kn(this,t),this.width=e,this.height=n},_i=function t(e,n){Kn(this,t),this.type=ei.VECTOR,this.x=e,this.y=n},Li=function(t,e,n){return new _i(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},Vi=function(){function t(e,n,i,r){Kn(this,t),this.type=ei.BEZIER_CURVE,this.start=e,this.startControl=n,this.endControl=i,this.end=r}return ti(t,[{key:"subdivide",value:function(e,n){var i=Li(this.start,this.startControl,e),r=Li(this.startControl,this.endControl,e),a=Li(this.endControl,this.end,e),o=Li(i,r,e),s=Li(r,a,e),l=Li(o,s,e);return n?new t(this.start,i,o,l):new t(l,s,a,this.end)}},{key:"reverse",value:function(){return new t(this.end,this.endControl,this.startControl,this.start)}}]),t}(),Di=function(){function t(e,n,i,r){Kn(this,t),this.left=e,this.top=n,this.width=i,this.height=r}return ti(t,null,[{key:"fromClientRect",value:function(e){return new t(e.left,e.top,e.width,e.height)}}]),t}(),Fi=function(t){return Di.fromClientRect(t.getBoundingClientRect())},Gi=function(t,e){return new Di(t.left+e[3].borderWidth,t.top+e[0].borderWidth,t.width-(e[1].borderWidth+e[3].borderWidth),t.height-(e[0].borderWidth+e[2].borderWidth))},Ui=function(t,e,n){var i=e[0].value,r=e[1].value,a=e[2].value,o=e[3].value;return new Di(t.left+o+n[3].borderWidth,t.top+i+n[0].borderWidth,t.width-(n[1].borderWidth+n[3].borderWidth+o+r),t.height-(n[0].borderWidth+n[2].borderWidth+i+a))},Wi=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("");var i=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),r=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new Di(0,0,i,r)},Xi=function(t,e){switch(e){case 0:return ji(t.topLeftOuter,t.topLeftInner,t.topRightOuter,t.topRightInner);case 1:return ji(t.topRightOuter,t.topRightInner,t.bottomRightOuter,t.bottomRightInner);case 2:return ji(t.bottomRightOuter,t.bottomRightInner,t.bottomLeftOuter,t.bottomLeftInner);case 3:default:return ji(t.bottomLeftOuter,t.bottomLeftInner,t.topLeftOuter,t.topLeftInner)}},ji=function(t,e,n,i){var r=[];return t instanceof Vi?r.push(t.subdivide(.5,!1)):r.push(t),n instanceof Vi?r.push(n.subdivide(.5,!0)):r.push(n),i instanceof Vi?r.push(i.subdivide(.5,!0).reverse()):r.push(i),e instanceof Vi?r.push(e.subdivide(.5,!1).reverse()):r.push(e),r},zi=function(t){return[t.topLeftOuter,t.topRightOuter,t.bottomRightOuter,t.bottomLeftOuter]},Hi=function(t){return[t.topLeftInner,t.topRightInner,t.bottomRightInner,t.bottomLeftInner]},Yi=function(t,e,n){var i=t.width/2,r=t.height/2,a=n[qi.TOP_LEFT][0].getAbsoluteValue(t.width)<i?n[qi.TOP_LEFT][0].getAbsoluteValue(t.width):i,o=n[qi.TOP_LEFT][1].getAbsoluteValue(t.height)<r?n[qi.TOP_LEFT][1].getAbsoluteValue(t.height):r,s=n[qi.TOP_RIGHT][0].getAbsoluteValue(t.width)<i?n[qi.TOP_RIGHT][0].getAbsoluteValue(t.width):i,l=n[qi.TOP_RIGHT][1].getAbsoluteValue(t.height)<r?n[qi.TOP_RIGHT][1].getAbsoluteValue(t.height):r,u=n[qi.BOTTOM_RIGHT][0].getAbsoluteValue(t.width)<i?n[qi.BOTTOM_RIGHT][0].getAbsoluteValue(t.width):i,h=n[qi.BOTTOM_RIGHT][1].getAbsoluteValue(t.height)<r?n[qi.BOTTOM_RIGHT][1].getAbsoluteValue(t.height):r,c=n[qi.BOTTOM_LEFT][0].getAbsoluteValue(t.width)<i?n[qi.BOTTOM_LEFT][0].getAbsoluteValue(t.width):i,f=n[qi.BOTTOM_LEFT][1].getAbsoluteValue(t.height)<r?n[qi.BOTTOM_LEFT][1].getAbsoluteValue(t.height):r,d=t.width-s,p=t.height-h,m=t.width-u,g=t.height-f;return{topLeftOuter:a>0||o>0?$i(t.left,t.top,a,o,qi.TOP_LEFT):new _i(t.left,t.top),topLeftInner:a>0||o>0?$i(t.left+e[3].borderWidth,t.top+e[0].borderWidth,Math.max(0,a-e[3].borderWidth),Math.max(0,o-e[0].borderWidth),qi.TOP_LEFT):new _i(t.left+e[3].borderWidth,t.top+e[0].borderWidth),topRightOuter:s>0||l>0?$i(t.left+d,t.top,s,l,qi.TOP_RIGHT):new _i(t.left+t.width,t.top),topRightInner:s>0||l>0?$i(t.left+Math.min(d,t.width+e[3].borderWidth),t.top+e[0].borderWidth,d>t.width+e[3].borderWidth?0:s-e[3].borderWidth,l-e[0].borderWidth,qi.TOP_RIGHT):new _i(t.left+t.width-e[1].borderWidth,t.top+e[0].borderWidth),bottomRightOuter:u>0||h>0?$i(t.left+m,t.top+p,u,h,qi.BOTTOM_RIGHT):new _i(t.left+t.width,t.top+t.height),bottomRightInner:u>0||h>0?$i(t.left+Math.min(m,t.width-e[3].borderWidth),t.top+Math.min(p,t.height+e[0].borderWidth),Math.max(0,u-e[1].borderWidth),h-e[2].borderWidth,qi.BOTTOM_RIGHT):new _i(t.left+t.width-e[1].borderWidth,t.top+t.height-e[2].borderWidth),bottomLeftOuter:c>0||f>0?$i(t.left,t.top+g,c,f,qi.BOTTOM_LEFT):new _i(t.left,t.top+t.height),bottomLeftInner:c>0||f>0?$i(t.left+e[3].borderWidth,t.top+g,Math.max(0,c-e[3].borderWidth),f-e[2].borderWidth,qi.BOTTOM_LEFT):new _i(t.left+e[3].borderWidth,t.top+t.height-e[2].borderWidth)}},qi={TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_RIGHT:2,BOTTOM_LEFT:3},$i=function(t,e,n,i,r){var a=(Math.sqrt(2)-1)/3*4,o=n*a,s=i*a,l=t+n,u=e+i;switch(r){case qi.TOP_LEFT:return new Vi(new _i(t,u),new _i(t,u-s),new _i(l-o,e),new _i(l,e));case qi.TOP_RIGHT:return new Vi(new _i(t,e),new _i(t+o,e),new _i(l,u-s),new _i(l,u));case qi.BOTTOM_RIGHT:return new Vi(new _i(l,e),new _i(l,e+s),new _i(t+o,u),new _i(t,u));case qi.BOTTOM_LEFT:default:return new Vi(new _i(l,u),new _i(l-o,u),new _i(t,e+s),new _i(t,e))}},Ki={REPEAT:0,NO_REPEAT:1,REPEAT_X:2,REPEAT_Y:3},Zi={AUTO:0,CONTAIN:1,COVER:2,LENGTH:3},Ji={BORDER_BOX:0,PADDING_BOX:1,CONTENT_BOX:2},Qi=Ji,tr=function t(e){switch(Kn(this,t),e){case"contain":this.size=Zi.CONTAIN;break;case"cover":this.size=Zi.COVER;break;case"auto":this.size=Zi.AUTO;break;default:this.value=new Ni(e)}},er=function(t,e,n){var i=0,r=0,a=t.size;if(a[0].size===Zi.CONTAIN||a[0].size===Zi.COVER){var o=n.width/n.height,s=e.width/e.height;return o<s!=(a[0].size===Zi.COVER)?new Bi(n.width,n.width/s):new Bi(n.height*s,n.height)}return a[0].value&&(i=a[0].value.getAbsoluteValue(n.width)),a[0].size===Zi.AUTO&&a[1].size===Zi.AUTO?r=e.height:a[1].size===Zi.AUTO?r=i/e.width*e.height:a[1].value&&(r=a[1].value.getAbsoluteValue(n.height)),a[0].size===Zi.AUTO&&(i=r/e.height*e.width),new Bi(i,r)},nr=new tr("auto"),ir=function(t,e){switch(e){case Ji.BORDER_BOX:return zi(t);case Ji.PADDING_BOX:default:return Hi(t)}},rr=function(t,e,n){return new _i(t[0].getAbsoluteValue(n.width-e.width),t[1].getAbsoluteValue(n.height-e.height))},ar=function(t,e,n,i,r){switch(t.repeat){case Ki.REPEAT_X:return[new _i(Math.round(r.left),Math.round(i.top+e.y)),new _i(Math.round(r.left+r.width),Math.round(i.top+e.y)),new _i(Math.round(r.left+r.width),Math.round(n.height+i.top+e.y)),new _i(Math.round(r.left),Math.round(n.height+i.top+e.y))];case Ki.REPEAT_Y:return[new _i(Math.round(i.left+e.x),Math.round(r.top)),new _i(Math.round(i.left+e.x+n.width),Math.round(r.top)),new _i(Math.round(i.left+e.x+n.width),Math.round(r.height+r.top)),new _i(Math.round(i.left+e.x),Math.round(r.height+r.top))];case Ki.NO_REPEAT:return[new _i(Math.round(i.left+e.x),Math.round(i.top+e.y)),new _i(Math.round(i.left+e.x+n.width),Math.round(i.top+e.y)),new _i(Math.round(i.left+e.x+n.width),Math.round(i.top+e.y+n.height)),new _i(Math.round(i.left+e.x),Math.round(i.top+e.y+n.height))];default:return[new _i(Math.round(r.left),Math.round(r.top)),new _i(Math.round(r.left+r.width),Math.round(r.top)),new _i(Math.round(r.left+r.width),Math.round(r.height+r.top)),new _i(Math.round(r.left),Math.round(r.height+r.top))]}},or=function(t,e){return{backgroundColor:new vi(t.backgroundColor),backgroundImage:hr(t,e),backgroundClip:sr(t.backgroundClip),backgroundOrigin:lr(t.backgroundOrigin)}},sr=function(t){switch(t){case"padding-box":return Ji.PADDING_BOX;case"content-box":return Ji.CONTENT_BOX}return Ji.BORDER_BOX},lr=function(t){switch(t){case"padding-box":return Qi.PADDING_BOX;case"content-box":return Qi.CONTENT_BOX}return Qi.BORDER_BOX},ur=function(t){switch(t.trim()){case"no-repeat":return Ki.NO_REPEAT;case"repeat-x":case"repeat no-repeat":return Ki.REPEAT_X;case"repeat-y":case"no-repeat repeat":return Ki.REPEAT_Y;case"repeat":return Ki.REPEAT}return Ki.REPEAT},hr=function(t,e){var n=dr(t.backgroundImage).map(function(t){if("url"===t.method){var n=e.loadImage(t.args[0]);t.args=n?[n]:[]}return t}),i=t.backgroundPosition.split(","),r=t.backgroundRepeat.split(","),a=t.backgroundSize.split(",");return n.map(function(t,e){var n=(a[e]||"auto").trim().split(" ").map(cr),o=(i[e]||"auto").trim().split(" ").map(fr);return{source:t,repeat:ur("string"==typeof r[e]?r[e]:r[0]),size:n.length<2?[n[0],nr]:[n[0],n[1]],position:o.length<2?[o[0],o[0]]:[o[0],o[1]]}})},cr=function(t){return"auto"===t?nr:new tr(t)},fr=function(t){switch(t){case"bottom":case"right":return new Ni("100%");case"left":case"top":return new Ni("0%");case"auto":return new Ni("0")}return new Ni(t)},dr=function(t){var e=/^\s$/,n=[],i=[],r="",a=null,o="",s=0,l=0,u=function(){var t="";if(r){'"'===o.substr(0,1)&&(o=o.substr(1,o.length-2)),o&&i.push(o.trim());var e=r.indexOf("-",1)+1;"-"===r.substr(0,1)&&e>0&&(t=r.substr(0,e).toLowerCase(),r=r.substr(e)),"none"!==(r=r.toLowerCase())&&n.push({prefix:t,method:r,args:i})}i=[],r=o=""};return t.split("").forEach(function(t){if(0!==s||!e.test(t)){switch(t){case'"':a?a===t&&(a=null):a=t;break;case"(":if(a)break;if(0===s)return void(s=1);l++;break;case")":if(a)break;if(1===s){if(0===l)return s=0,void u();l--}break;case",":if(a)break;if(0===s)return void u();if(1===s&&0===l&&!r.match(/^url$/i))return i.push(o.trim()),void(o="")}0===s?r+=t:o+=t}}),u(),n};!function(t,e){var n=(g.Object||{})[t]||Object[t],i={};i[t]=e(n),N(N.S+N.F*x(function(){n(1)}),"Object",i)}("keys",function(){return function(t){return st(ht(t))}});var pr=g.Object.keys,mr=e(n(function(t){t.exports={default:pr,__esModule:!0}})),gr={NONE:0,SOLID:1},yr=mr({TOP:0,RIGHT:1,BOTTOM:2,LEFT:3}).map(function(t){return t.toLowerCase()}),vr=function(t){switch(t){case"none":return gr.NONE}return gr.SOLID},br=function(t){return yr.map(function(e){var n=new vi(t.getPropertyValue("border-"+e+"-color")),i=vr(t.getPropertyValue("border-"+e+"-style")),r=parseFloat(t.getPropertyValue("border-"+e+"-width"));return{borderColor:n,borderStyle:i,borderWidth:isNaN(r)?0:r}})},wr=["top-left","top-right","bottom-right","bottom-left"],xr=function(t){return wr.map(function(e){var n=t.getPropertyValue("border-"+e+"-radius").split(" ").map(Ni.create),i=si(n,2),r=i[0],a=i[1];return void 0===a?[r,r]:[r,a]})},Er={NONE:1,BLOCK:2,INLINE:4,RUN_IN:8,FLOW:16,FLOW_ROOT:32,TABLE:64,FLEX:128,GRID:256,RUBY:512,SUBGRID:1024,LIST_ITEM:2048,TABLE_ROW_GROUP:4096,TABLE_HEADER_GROUP:8192,TABLE_FOOTER_GROUP:16384,TABLE_ROW:32768,TABLE_CELL:65536,TABLE_COLUMN_GROUP:1<<17,TABLE_COLUMN:1<<18,TABLE_CAPTION:1<<19,RUBY_BASE:1<<20,RUBY_TEXT:1<<21,RUBY_BASE_CONTAINER:1<<22,RUBY_TEXT_CONTAINER:1<<23,CONTENTS:1<<24,INLINE_BLOCK:1<<25,INLINE_LIST_ITEM:1<<26,INLINE_TABLE:1<<27,INLINE_FLEX:1<<28,INLINE_GRID:1<<29},Tr=function(t){switch(t){case"block":return Er.BLOCK;case"inline":return Er.INLINE;case"run-in":return Er.RUN_IN;case"flow":return Er.FLOW;case"flow-root":return Er.FLOW_ROOT;case"table":return Er.TABLE;case"flex":return Er.FLEX;case"grid":return Er.GRID;case"ruby":return Er.RUBY;case"subgrid":return Er.SUBGRID;case"list-item":return Er.LIST_ITEM;case"table-row-group":return Er.TABLE_ROW_GROUP;case"table-header-group":return Er.TABLE_HEADER_GROUP;case"table-footer-group":return Er.TABLE_FOOTER_GROUP;case"table-row":return Er.TABLE_ROW;case"table-cell":return Er.TABLE_CELL;case"table-column-group":return Er.TABLE_COLUMN_GROUP;case"table-column":return Er.TABLE_COLUMN;case"table-caption":return Er.TABLE_CAPTION;case"ruby-base":return Er.RUBY_BASE;case"ruby-text":return Er.RUBY_TEXT;case"ruby-base-container":return Er.RUBY_BASE_CONTAINER;case"ruby-text-container":return Er.RUBY_TEXT_CONTAINER;case"contents":return Er.CONTENTS;case"inline-block":return Er.INLINE_BLOCK;case"inline-list-item":return Er.INLINE_LIST_ITEM;case"inline-table":return Er.INLINE_TABLE;case"inline-flex":return Er.INLINE_FLEX;case"inline-grid":return Er.INLINE_GRID}return Er.NONE},Pr=function(t,e){return t|Tr(e)},Cr=function(t){return t.split(" ").reduce(Pr,0)},Sr={NONE:0,LEFT:1,RIGHT:2,INLINE_START:3,INLINE_END:4},Or=function(t){switch(t){case"left":return Sr.LEFT;case"right":return Sr.RIGHT;case"inline-start":return Sr.INLINE_START;case"inline-end":return Sr.INLINE_END}return Sr.NONE},kr=function(t){switch(t){case"normal":return 400;case"bold":return 700}var e=parseInt(t,10);return isNaN(e)?400:e},Ir=function(t){return{fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontVariant:t.fontVariant,fontWeight:kr(t.fontWeight)}},Rr=function(t){if("normal"===t)return 0;var e=parseInt(t,10);return isNaN(e)?0:e},Mr={VISIBLE:0,HIDDEN:1,SCROLL:2,AUTO:3},Ar=function(t){switch(t){case"hidden":return Mr.HIDDEN;case"scroll":return Mr.SCROLL;case"auto":return Mr.AUTO;case"visible":default:return Mr.VISIBLE}},Nr=["top","right","bottom","left"],Br=function(t){return Nr.map(function(e){return new Ni(t.getPropertyValue("padding-"+e))})},_r={STATIC:0,RELATIVE:1,ABSOLUTE:2,FIXED:3,STICKY:4},Lr=function(t){switch(t){case"relative":return _r.RELATIVE;case"absolute":return _r.ABSOLUTE;case"fixed":return _r.FIXED;case"sticky":return _r.STICKY}return _r.STATIC},Vr=/^([+-]|\d|\.)$/i,Dr=function(t){if("none"===t||"string"!=typeof t)return null;for(var e="",n=!1,i=[],r=[],a=0,o=null,s=function(){e.length&&(n?i.push(parseFloat(e)):o=new vi(e)),n=!1,e=""},l=function(){i.length&&null!==o&&r.push({color:o,offsetX:i[0]||0,offsetY:i[1]||0,blur:i[2]||0}),i.splice(0,i.length),o=null},u=0;u<t.length;u++){var h=t[u];switch(h){case"(":e+=h,a++;break;case")":e+=h,a--;break;case",":0===a?(s(),l()):e+=h;break;case" ":0===a?s():e+=h;break;default:0===e.length&&Vr.test(h)&&(n=!0),e+=h}}return s(),l(),0===r.length?null:r},Fr={NONE:0,LOWERCASE:1,UPPERCASE:2,CAPITALIZE:3},Gr=function(t){switch(t){case"uppercase":return Fr.UPPERCASE;case"lowercase":return Fr.LOWERCASE;case"capitalize":return Fr.CAPITALIZE}return Fr.NONE},Ur=function(t){return parseFloat(t.trim())},Wr=/(matrix|matrix3d)\((.+)\)/,Xr=function(t){var e=zr(t.transform||t.webkitTransform||t.mozTransform||t.msTransform||t.oTransform);return null===e?null:{transform:e,transformOrigin:jr(t.transformOrigin||t.webkitTransformOrigin||t.mozTransformOrigin||t.msTransformOrigin||t.oTransformOrigin)}},jr=function(t){if("string"!=typeof t){var e=new Ni("0");return[e,e]}var n=t.split(" ").map(Ni.create);return[n[0],n[1]]},zr=function(t){if("none"===t||"string"!=typeof t)return null;var e=t.match(Wr);if(e){if("matrix"===e[1]){var n=e[2].split(",").map(Ur);return[n[0],n[1],n[2],n[3],n[4],n[5]]}var i=e[2].split(",").map(Ur);return[i[0],i[1],i[4],i[5],i[12],i[13]]}return null},Hr={VISIBLE:0,HIDDEN:1,COLLAPSE:2},Yr=function(t){switch(t){case"hidden":return Hr.HIDDEN;case"collapse":return Hr.COLLAPSE;case"visible":default:return Hr.VISIBLE}},qr=function(t){var e="auto"===t;return{auto:e,order:e?0:parseInt(t,10)}},$r=2147483647,Kr=/^xn--/,Zr=/[^\0-\x7E]/,Jr=/[\x2E\u3002\uFF0E\uFF61]/g,Qr={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ta=Math.floor,ea=String.fromCharCode,na=function(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36},ia=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},ra=function(t,e,n){var i=0;for(t=n?ta(t/700):t>>1,t+=ta(t/e);t>455;i+=36)t=ta(t/35);return ta(i+36*t/(t+38))},aa=function(t){var e=[],n=t.length,i=0,r=128,o=72,s=t.lastIndexOf("-");s<0&&(s=0);for(var l=0;l<s;++l)t.charCodeAt(l)>=128&&a("not-basic"),e.push(t.charCodeAt(l));for(var u=s>0?s+1:0;u<n;){for(var h=i,c=1,f=36;;f+=36){u>=n&&a("invalid-input");var d=na(t.charCodeAt(u++));(d>=36||d>ta(($r-i)/c))&&a("overflow"),i+=d*c;var p=f<=o?1:f>=o+26?26:f-o;if(d<p)break;var m=36-p;c>ta($r/m)&&a("overflow"),c*=m}var g=e.length+1;o=ra(i-h,g,0==h),ta(i/g)>$r-r&&a("overflow"),r+=ta(i/g),i%=g,e.splice(i++,0,r)}return String.fromCodePoint.apply(String,e)},oa=function(t){var e=[],n=(t=l(t)).length,i=128,r=0,o=72,s=!0,u=!1,h=void 0;try{for(var c,f=t[Symbol.iterator]();!(s=(c=f.next()).done);s=!0)(O=c.value)<128&&e.push(ea(O))}catch(t){u=!0,h=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw h}}var d=e.length,p=d;for(d&&e.push("-");p<n;){var m=$r,g=!0,y=!1,v=void 0;try{for(var b,w=t[Symbol.iterator]();!(g=(b=w.next()).done);g=!0)(O=b.value)>=i&&O<m&&(m=O)}catch(t){y=!0,v=t}finally{try{!g&&w.return&&w.return()}finally{if(y)throw v}}var x=p+1;m-i>ta(($r-r)/x)&&a("overflow"),r+=(m-i)*x,i=m;var E=!0,T=!1,P=void 0;try{for(var C,S=t[Symbol.iterator]();!(E=(C=S.next()).done);E=!0){var O=C.value;if(O<i&&++r>$r&&a("overflow"),O==i){for(var k=r,I=36;;I+=36){var R=I<=o?1:I>=o+26?26:I-o;if(k<R)break;var M=k-R,A=36-R;e.push(ea(ia(R+M%A,0))),k=ta(M/A)}e.push(ea(ia(k,0))),o=ra(r,x,p==d),r=0,++p}}}catch(t){T=!0,P=t}finally{try{!E&&S.return&&S.return()}finally{if(T)throw P}}++r,++i}return e.join("")},sa={version:"2.1.0",ucs2:{decode:l,encode:function(t){return String.fromCodePoint.apply(String,babelHelpers.toConsumableArray(t))}},decode:aa,encode:oa,toASCII:function(t){return s(t,function(t){return Zr.test(t)?"xn--"+oa(t):t})},toUnicode:function(t){return s(t,function(t){return Kr.test(t)?aa(t.slice(4).toLowerCase()):t})}}.ucs2,la=function(){function t(e){Kn(this,t),this.element=e}return ti(t,[{key:"render",value:function(t){var e=this;this.options=t,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=Math.floor(t.bounds.width*t.scale),this.canvas.height=Math.floor(t.bounds.height*t.scale),this.canvas.style.width=t.bounds.width+"px",this.canvas.style.height=t.bounds.height+"px",this.ctx.scale(this.options.scale,this.options.scale),t.logger.log("ForeignObject renderer initialized with scale "+this.options.scale);var n=ua(t.bounds.width,t.bounds.height,this.element);return ha(n).then(function(n){return t.backgroundColor&&(e.ctx.fillStyle=t.backgroundColor.toString(),e.ctx.fillRect(0,0,t.bounds.width,t.bounds.height)),e.ctx.drawImage(n,0,0),e.canvas})}}]),t}(),ua=function(t,e,n){var i="http://www.w3.org/2000/svg",r=document.createElementNS(i,"svg"),a=document.createElementNS(i,"foreignObject");return r.setAttributeNS(null,"width",t),r.setAttributeNS(null,"height",e),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"externalResourcesRequired","true"),r.appendChild(a),a.appendChild(n),r},ha=function(t){return new $n(function(e,n){var i=new Image;i.onload=function(){return e(i)},i.onerror=n,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))})},ca=function(t){if(t.createRange){var e=t.createRange();if(e.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n);var i=e.getBoundingClientRect(),r=Math.round(i.height);if(t.body.removeChild(n),123===r)return!0}}return!1},fa=function(t,e){var n=new Image,i=t.createElement("canvas"),r=i.getContext("2d");return new $n(function(t){n.src=e;var a=function(){try{r.drawImage(n,0,0),i.toDataURL()}catch(e){return t(!1)}return t(!0)};n.onload=a,n.onerror=function(){return t(!1)},!0===n.complete&&setTimeout(function(){a()},500)})},da=function(){return void 0!==(new Image).crossOrigin},pa=function(){return"string"==typeof(new XMLHttpRequest).responseType},ma=function(t){var e=new Image,n=t.createElement("canvas"),i=n.getContext("2d");e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(e,0,0),n.toDataURL()}catch(t){return!1}return!0},ga=function(t){return 0===t[0]&&255===t[1]&&0===t[2]&&255===t[3]},ya=function(t){var e=t.createElement("canvas");e.width=100,e.height=100;var n=e.getContext("2d");n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,100,100);var i=new Image,r=e.toDataURL();i.src=r;var a=ua(100,100,i);return n.fillStyle="red",n.fillRect(0,0,100,100),ha(a).then(function(e){n.drawImage(e,0,0);var i=n.getImageData(0,0,100,100).data;n.fillStyle="red",n.fillRect(0,0,100,100);var a=t.createElement("div");return a.style.backgroundImage="url("+r+")",a.style.height="100px",ga(i)?ha(ua(100,100,a)):$n.reject(!1)}).then(function(t){return n.drawImage(t,0,0),ga(n.getImageData(0,0,100,100).data)}).catch(function(t){return!1})},va={get SUPPORT_RANGE_BOUNDS(){var t=ca(document);return Object.defineProperty(va,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=ma(document);return Object.defineProperty(va,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_BASE64_DRAWING(){return function(t){var e=fa(document,t);return Object.defineProperty(va,"SUPPORT_BASE64_DRAWING",{value:function(){return e}}),e}},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=ya(document);return Object.defineProperty(va,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=da();return Object.defineProperty(va,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=pa();return Object.defineProperty(va,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(va,"SUPPORT_CORS_XHR",{value:t}),t}},ba=/[^\u0000-\u00ff]/,wa=function(t){return ba.test(t)},xa=function(t){return sa.encode([t])},Ea=function t(e,n){Kn(this,t),this.text=e,this.bounds=n},Ta=function(t,e,n){for(var i=sa.decode(t),r=0!==e.style.letterSpacing||wa(t)?i.map(xa):Sa(i),a=r.length,o=[],s=0,l=0;l<a;l++){var u=r[l];if(e.style.textDecoration!==Ei.NONE||u.trim().length>0)if(va.SUPPORT_RANGE_BOUNDS)o.push(new Ea(u,Ca(n,s,u.length)));else{var h=n.splitText(u.length);o.push(new Ea(u,Pa(n))),n=h}else va.SUPPORT_RANGE_BOUNDS||(n=n.splitText(u.length));s+=u.length}return o},Pa=function(t){var e=t.ownerDocument.createElement("html2canvaswrapper");e.appendChild(t.cloneNode(!0));var n=t.parentNode;if(n){n.replaceChild(e,t);var i=Fi(e);return e.firstChild&&n.replaceChild(e.firstChild,e),i}return new Di(0,0,0,0)},Ca=function(t,e,n){var i=t.ownerDocument.createRange();return i.setStart(t,e),i.setEnd(t,e+n),Di.fromClientRect(i.getBoundingClientRect())},Sa=function(t){for(var e=[],n=0,i=!1,r=void 0;t.length;)Oa(t[n])===i?((r=t.splice(0,n)).length&&e.push(sa.encode(r)),i=!i,n=0):n++,n>=t.length&&(r=t.splice(0,n)).length&&e.push(sa.encode(r));return e},Oa=function(t){return-1!==[32,13,10,9,45].indexOf(t)},ka=function(){function t(e,n,i){Kn(this,t),this.text=e,this.parent=n,this.bounds=i}return ti(t,null,[{key:"fromTextNode",value:function(e,n){var i=Ra(e.data,n.style.textTransform);return new t(i,n,Ta(i,n,e))}}]),t}(),Ia=/(^|\s|:|-|\(|\))([a-z])/g,Ra=function(t,e){switch(e){case Fr.LOWERCASE:return t.toLowerCase();case Fr.CAPITALIZE:return t.replace(Ia,u);case Fr.UPPERCASE:return t.toUpperCase();default:return t}},Ma=function t(e,n,i){Kn(this,t),this.type=ei.CIRCLE,this.x=e,this.y=n,this.radius=i},Aa=new vi([42,42,42]),Na=new vi([165,165,165]),Ba=new vi([222,222,222]),_a={borderWidth:1,borderColor:Na,borderStyle:gr.SOLID},La=[_a,_a,_a,_a],Va={backgroundColor:Ba,backgroundImage:[],backgroundClip:Ji.PADDING_BOX,backgroundOrigin:Qi.PADDING_BOX},Da=new Ni("50%"),Fa=[Da,Da],Ga=[Fa,Fa,Fa,Fa],Ua=new Ni("3px"),Wa=[Ua,Ua],Xa=[Wa,Wa,Wa,Wa],ja=function(t){return"radio"===t.type?Ga:Xa},za=function(t,e){if("radio"===t.type||"checkbox"===t.type){if(t.checked){var n=Math.min(e.bounds.width,e.bounds.height);e.childNodes.push("checkbox"===t.type?[new _i(e.bounds.left+.39363*n,e.bounds.top+.79*n),new _i(e.bounds.left+.16*n,e.bounds.top+.5549*n),new _i(e.bounds.left+.27347*n,e.bounds.top+.44071*n),new _i(e.bounds.left+.39694*n,e.bounds.top+.5649*n),new _i(e.bounds.left+.72983*n,e.bounds.top+.23*n),new _i(e.bounds.left+.84*n,e.bounds.top+.34085*n),new _i(e.bounds.left+.39363*n,e.bounds.top+.79*n)]:new Ma(e.bounds.left+n/4,e.bounds.top+n/4,n/4))}}else $a(Ka(t),t,e,!1)},Ha=function(t,e){$a(t.value,t,e,!0)},Ya=function(t,e){var n=t.options[t.selectedIndex||0];$a(n?n.text||"":"",t,e,!1)},qa=function(t){return t.width>t.height?(t.left+=(t.width-t.height)/2,t.width=t.height):t.width<t.height&&(t.top+=(t.height-t.width)/2,t.height=t.width),t},$a=function(t,e,n,i){var r=e.ownerDocument.body;if(t.length>0&&r){var a=e.ownerDocument.createElement("html2canvaswrapper");Mi(e.ownerDocument.defaultView.getComputedStyle(e,null),a),a.style.position="fixed",a.style.left=n.bounds.left+"px",a.style.top=n.bounds.top+"px",i||(a.style.whiteSpace="nowrap");var o=e.ownerDocument.createTextNode(t);a.appendChild(o),r.appendChild(a),n.childNodes.push(ka.fromTextNode(o,n)),r.removeChild(a)}},Ka=function(t){var e="password"===t.type?new Array(t.value.length+1).join("•"):t.value;return 0===e.length?t.placeholder||"":e},Za=["INPUT","TEXTAREA","SELECT"],Ja=function(){function t(e,n,i,r){var a=this;Kn(this,t),this.parent=n,this.index=r,this.childNodes=[];var o=e.ownerDocument.defaultView,s=o.getComputedStyle(e,null),l=Cr(s.display),u="radio"===e.type||"checkbox"===e.type,h=Lr(s.position);this.style={background:u?Va:or(s,i),border:u?La:br(s),borderRadius:(e instanceof o.HTMLInputElement||e instanceof HTMLInputElement)&&u?ja(e):xr(s),color:u?Aa:new vi(s.color),display:l,float:Or(s.float),font:Ir(s),letterSpacing:Rr(s.letterSpacing),opacity:parseFloat(s.opacity),overflow:-1===Za.indexOf(e.tagName)?Ar(s.overflow):Mr.HIDDEN,padding:Br(s),position:h,textDecoration:Oi(s),textShadow:Dr(s.textShadow),textTransform:Gr(s.textTransform),transform:Xr(s),visibility:Yr(s.visibility),zIndex:qr(h!==_r.STATIC?s.zIndex:"auto")},this.isTransformed()&&(e.style.transform="matrix(1,0,0,1,0,0)"),"IMG"===e.tagName&&e.addEventListener("load",function(){a.bounds=Fi(e),a.curvedBounds=Yi(a.bounds,a.style.border,a.style.borderRadius)}),this.image=Qa(e,i),this.bounds=u?qa(Fi(e)):Fi(e),this.curvedBounds=Yi(this.bounds,this.style.border,this.style.borderRadius)}return ti(t,[{key:"getClipPaths",value:function(){var t=this.parent?this.parent.getClipPaths():[];return this.style.overflow===Mr.HIDDEN||this.style.overflow===Mr.SCROLL?t.concat([Hi(this.curvedBounds)]):t}},{key:"isInFlow",value:function(){return this.isRootElement()&&!this.isFloating()&&!this.isAbsolutelyPositioned()}},{key:"isVisible",value:function(){return!Ri(this.style.display,Er.NONE)&&this.style.opacity>0&&this.style.visibility===Hr.VISIBLE}},{key:"isAbsolutelyPositioned",value:function(){return this.style.position!==_r.STATIC&&this.style.position!==_r.RELATIVE}},{key:"isPositioned",value:function(){return this.style.position!==_r.STATIC}},{key:"isFloating",value:function(){return this.style.float!==Sr.NONE}},{key:"isRootElement",value:function(){return null===this.parent}},{key:"isTransformed",value:function(){return null!==this.style.transform}},{key:"isPositionedWithZIndex",value:function(){return this.isPositioned()&&!this.style.zIndex.auto}},{key:"isInlineLevel",value:function(){return Ri(this.style.display,Er.INLINE)||Ri(this.style.display,Er.INLINE_BLOCK)||Ri(this.style.display,Er.INLINE_FLEX)||Ri(this.style.display,Er.INLINE_GRID)||Ri(this.style.display,Er.INLINE_LIST_ITEM)||Ri(this.style.display,Er.INLINE_TABLE)}},{key:"isInlineBlockOrInlineTable",value:function(){return Ri(this.style.display,Er.INLINE_BLOCK)||Ri(this.style.display,Er.INLINE_TABLE)}}]),t}(),Qa=function(t,e){if(t instanceof t.ownerDocument.defaultView.SVGSVGElement||t instanceof SVGSVGElement){var n=new XMLSerializer;return e.loadImage("data:image/svg+xml,"+encodeURIComponent(n.serializeToString(t)))}switch(t.tagName){case"IMG":return e.loadImage(t.currentSrc||t.src);case"CANVAS":return e.loadCanvas(t);case"DIV":var i=t.getAttribute("data-html2canvas-internal-iframe-key");if(i)return console.log("ok"),i}return null},to=function(){function t(e,n,i){Kn(this,t),this.container=e,this.parent=n,this.contexts=[],this.children=[],this.treatAsRealStackingContext=i}return ti(t,[{key:"getOpacity",value:function(){return this.parent?this.container.style.opacity*this.parent.getOpacity():this.container.style.opacity}},{key:"getRealParentStackingContext",value:function(){return!this.parent||this.treatAsRealStackingContext?this:this.parent.getRealParentStackingContext()}}]),t}(),eo=function(t,e,n){var i=0,r=new Ja(t,null,e,i++),a=new to(r,null,!0);return io(t,r,a,e,i),a},no=["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"],io=function t(e,n,i,r,a){for(var o,s=e.firstChild;s;s=o){o=s.nextSibling;var l=s.ownerDocument.defaultView;if(s instanceof l.Text||s instanceof Text)s.data.trim().length>0&&n.childNodes.push(ka.fromTextNode(s,n));else if(s instanceof l.HTMLElement||s instanceof HTMLElement){if(-1===no.indexOf(s.nodeName)){var u=new Ja(s,n,r,a++);if(u.isVisible()){"INPUT"===s.tagName?za(s,u):"TEXTAREA"===s.tagName?Ha(s,u):"SELECT"===s.tagName&&Ya(s,u);var h="TEXTAREA"!==s.tagName,c=ro(u,s);if(c||ao(u)){var f=c||u.isPositioned()?i.getRealParentStackingContext():i,d=new to(u,f,c);f.contexts.push(d),h&&t(s,u,d,r,a)}else i.children.push(u),h&&t(s,u,i,r,a)}}}else if(s instanceof l.SVGSVGElement||s instanceof SVGSVGElement){var p=new Ja(s,n,r,a++),m=ro(p,s);if(m||ao(p)){var g=m||p.isPositioned()?i.getRealParentStackingContext():i,y=new to(p,g,m);g.contexts.push(y)}else i.children.push(p)}}},ro=function(t,e){return t.isRootElement()||t.isPositionedWithZIndex()||t.style.opacity<1||t.isTransformed()||oo(t,e)},ao=function(t){return t.isPositioned()||t.isFloating()},oo=function(t,e){return"BODY"===e.nodeName&&t.parent instanceof Ja&&t.parent.style.background.backgroundColor.isTransparent()},so=function(){function t(e){Kn(this,t),this._data={},this._document=e}return ti(t,[{key:"_parseMetrics",value:function(t){var e=this._document.createElement("div"),n=this._document.createElement("img"),i=this._document.createElement("span"),r=this._document.body;if(!r)throw new Error("");e.style.visibility="hidden",e.style.fontFamily=t.fontFamily,e.style.fontSize=t.fontSize,e.style.margin="0",e.style.padding="0",r.appendChild(e),n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",i.style.fontFamily=t.fontFamily,i.style.fontSize=t.fontSize,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode("Hidden Text")),e.appendChild(i),e.appendChild(n);var a=n.offsetTop-i.offsetTop+2;e.removeChild(i),e.appendChild(this._document.createTextNode("Hidden Text")),e.style.lineHeight="normal",n.style.verticalAlign="super";var o=n.offsetTop-e.offsetTop+2;return r.removeChild(e),{baseline:a,middle:o}}},{key:"getMetrics",value:function(t){return void 0===this._data[t.fontFamily+" "+t.fontSize]&&(this._data[t.fontFamily+" "+t.fontSize]=this._parseMetrics(t)),this._data[t.fontFamily+" "+t.fontSize]}}]),t}(),lo=/([+-]?\d*\.?\d+)(deg|grad|rad|turn)/i,uo=function(t){var e=t.match(lo);if(e){var n=parseFloat(e[1]);switch(e[2].toLowerCase()){case"deg":return Math.PI*n/180;case"grad":return Math.PI/200*n;case"rad":return n;case"turn":return 2*Math.PI*n}}return null},ho=/^(to )?(left|top|right|bottom)( (left|top|right|bottom))?$/i,co=/^([+-]?\d*\.?\d+)% ([+-]?\d*\.?\d+)%$/i,fo=/(px)|%|( 0)$/i,po=/^(from|to)\((.+)\)$/i,mo=function(t,e){var n=t.args,i=t.method;return"linear-gradient"===i?go(n,e):"gradient"===i&&"linear"===n[0]?go(["to bottom"].concat(n.slice(3).map(function(t){return t.match(po)}).filter(function(t){return null!==t}).map(function(t){return t[2]})),e):void 0},go=function(t,e){for(var n=uo(t[0]),i=ho.test(t[0]),r=i||null!==n||co.test(t[0]),a=r?null!==n?yo(n,e):i?bo(t[0],e):wo(t[0],e):yo(Math.PI,e),o=[],s=r?1:0,l=s;l<t.length;l++){var u=t[l],h=fo.test(u),c=u.lastIndexOf(" "),f=new vi(h?u.substring(0,c):u),d=h?new Ni(u.substring(c+1)):l===s?new Ni("0%"):l===t.length-1?new Ni("100%"):null;o.push({color:f,stop:d})}for(var p=Math.min(Math.sqrt(Math.pow(Math.abs(a.x0)+Math.abs(a.x1),2)+Math.pow(Math.abs(a.y0)+Math.abs(a.y1),2)),2*e.width,2*e.height),m=o.map(function(t){var e=t.color,n=t.stop;return{color:e,stop:n?n.getAbsoluteValue(p)/p:null}}),g=m[0].stop,y=0;y<m.length;y++)if(null!==g){var v=m[y].stop;if(null===v){for(var b=y;null===m[b].stop;)b++;for(var w=b-y+1,x=(m[b].stop-g)/w;y<b;y++)g=m[y].stop=g+x}else g=v}return{direction:a,colorStops:m}},yo=function(t,e){var n=e.width,i=e.height,r=.5*n,a=.5*i,o=(Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t)))/2,s=r+Math.sin(t)*o,l=a-Math.cos(t)*o;return{x0:s,x1:n-s,y0:l,y1:i-l}},vo=function(t){return Math.acos(t.width/2/(Math.sqrt(Math.pow(t.width,2)+Math.pow(t.height,2))/2))},bo=function(t,e){switch(t){case"bottom":case"to top":return yo(0,e);case"left":case"to right":return yo(Math.PI/2,e);case"right":case"to left":return yo(3*Math.PI/2,e);case"top right":case"right top":case"to bottom left":case"to left bottom":return yo(Math.PI+vo(e),e);case"top left":case"left top":case"to bottom right":case"to right bottom":return yo(Math.PI-vo(e),e);case"bottom left":case"left bottom":case"to top right":case"to right top":return yo(vo(e),e);case"bottom right":case"right bottom":case"to top left":case"to left top":return yo(2*Math.PI-vo(e),e);case"top":case"to bottom":default:return yo(Math.PI,e)}},wo=function(t,e){var n=t.split(" ").map(parseFloat),i=si(n,2),r=i[0],a=i[1],o=r/100*e.width/(a/100*e.height);return yo(Math.atan(isNaN(o)?1:o)+Math.PI/2,e)},xo=function(){function t(e,n){Kn(this,t),this.target=e,this.options=n,e.render(n)}return ti(t,[{key:"renderNode",value:function(t){t.isVisible()&&(this.renderNodeBackgroundAndBorders(t),this.renderNodeContent(t))}},{key:"renderNodeContent",value:function(t){var e=this,n=function(){if(t.childNodes.length&&t.childNodes.forEach(function(n){if(n instanceof ka){var i=n.parent.style;e.target.renderTextNode(n.bounds,i.color,i.font,i.textDecoration,i.textShadow)}else e.target.drawShape(n,t.style.color)}),t.image){var n=e.options.imageStore.get(t.image);if(n){var i=Ui(t.bounds,t.style.padding,t.style.border),r="number"==typeof n.width&&n.width>0?n.width:i.width,a="number"==typeof n.height&&n.height>0?n.height:i.height;r>0&&a>0&&e.target.clip([Hi(t.curvedBounds)],function(){e.target.drawImage(n,new Di(0,0,r,a),i)})}}},i=t.getClipPaths();i.length?this.target.clip(i,n):n()}},{key:"renderNodeBackgroundAndBorders",value:function(t){var e=this,n=!t.style.background.backgroundColor.isTransparent()||t.style.background.backgroundImage.length,i=t.style.border.filter(function(t){return t.borderStyle!==gr.NONE&&!t.borderColor.isTransparent()}),r=function(){var r=ir(t.curvedBounds,t.style.background.backgroundClip);n&&e.target.clip([r],function(){t.style.background.backgroundColor.isTransparent()||e.target.fill(t.style.background.backgroundColor),e.renderBackgroundImage(t)}),i.forEach(function(n,i){e.renderBorder(n,i,t.curvedBounds)})};if(n||i.length){var a=t.parent?t.parent.getClipPaths():[];a.length?this.target.clip(a,r):r()}}},{key:"renderBackgroundImage",value:function(t){var e=this;t.style.background.backgroundImage.slice(0).reverse().forEach(function(n){if("url"===n.source.method&&n.source.args.length)e.renderBackgroundRepeat(t,n);else{var i=mo(n.source,t.bounds);if(i){var r=t.bounds;e.target.renderLinearGradient(r,i)}}})}},{key:"renderBackgroundRepeat",value:function(t,e){var n=this.options.imageStore.get(e.source.args[0]);if(n){var i=t.bounds,r=Gi(i,t.style.border),a=er(e,n,i),o=t.style.background.backgroundOrigin===Qi.BORDER_BOX?i:r,s=rr(e.position,a,o),l=ar(e,s,a,o,i),u=Math.round(r.left+s.x),h=Math.round(r.top+s.y);this.target.renderRepeat(l,n,a,u,h)}}},{key:"renderBorder",value:function(t,e,n){this.target.drawShape(Xi(n,e),t.borderColor)}},{key:"renderStack",value:function(t){var e=this;if(t.container.isVisible()){var n=t.getOpacity();n!==this._opacity&&(this.target.setOpacity(t.getOpacity()),this._opacity=n);var i=t.container.style.transform;null!==i?this.target.transform(t.container.bounds.left+i.transformOrigin[0].value,t.container.bounds.top+i.transformOrigin[1].value,i.transform,function(){return e.renderStackContent(t)}):this.renderStackContent(t)}}},{key:"renderStackContent",value:function(t){var e=To(t),n=si(e,5),i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=Eo(t),u=si(l,2),h=u[0],c=u[1];this.renderNodeBackgroundAndBorders(t.container),i.sort(Po).forEach(this.renderStack,this),this.renderNodeContent(t.container),c.forEach(this.renderNode,this),o.forEach(this.renderStack,this),s.forEach(this.renderStack,this),h.forEach(this.renderNode,this),r.forEach(this.renderStack,this),a.sort(Po).forEach(this.renderStack,this)}},{key:"render",value:function(t){return this.options.backgroundColor&&this.target.rectangle(0,0,this.options.width,this.options.height,this.options.backgroundColor),this.renderStack(t),this.target.getTarget()}}]),t}(),Eo=function(t){for(var e=[],n=[],i=t.children.length,r=0;r<i;r++){var a=t.children[r];a.isInlineLevel()?e.push(a):n.push(a)}return[e,n]},To=function(t){for(var e=[],n=[],i=[],r=[],a=[],o=t.contexts.length,s=0;s<o;s++){var l=t.contexts[s];l.container.isPositioned()||l.container.style.opacity<1||l.container.isTransformed()?l.container.style.zIndex.order<0?e.push(l):l.container.style.zIndex.order>0?i.push(l):n.push(l):l.container.isFloating()?r.push(l):a.push(l)}return[e,n,i,r,a]},Po=function(t,e){return t.container.style.zIndex.order>e.container.style.zIndex.order?1:t.container.style.zIndex.order<e.container.style.zIndex.order?-1:t.container.index>e.container.index?1:-1},Co=function(t,e){if(!e.proxy)return $n.reject(null);var n=e.proxy;return new $n(function(i,r){var a=va.SUPPORT_CORS_XHR&&va.SUPPORT_RESPONSE_TYPE?"blob":"text",o=va.SUPPORT_CORS_XHR?new XMLHttpRequest:new XDomainRequest;if(o.onload=function(){if(o instanceof XMLHttpRequest)if(200===o.status)if("text"===a)i(o.response);else{var t=new FileReader;t.addEventListener("load",function(){return i(t.result)},!1),t.addEventListener("error",function(t){return r(t)},!1),t.readAsDataURL(o.response)}else r("");else i(o.responseText)},o.onerror=r,o.open("GET",n+"?url="+encodeURIComponent(t)+"&responseType="+a),"text"!==a&&o instanceof XMLHttpRequest&&(o.responseType=a),e.imageTimeout){var s=e.imageTimeout;o.timeout=s,o.ontimeout=function(){return r("")}}o.send()})},So=function(){function t(e,n,i){Kn(this,t),this.options=e,this._window=i,this.origin=this.getOrigin(i.location.href),this.cache={},this.logger=n,this._index=0}return ti(t,[{key:"loadImage",value:function(t){var e=this;if(this.hasImageInCache(t))return t;if(No(t)){if(!0===this.options.allowTaint||va.SUPPORT_SVG_DRAWING)return this.addImage(t,t,!1)}else{if(!0===this.options.allowTaint||Ao(t)||this.isSameOrigin(t))return this.addImage(t,t,!1);if(!this.isSameOrigin(t)){if("string"==typeof this.options.proxy)return this.cache[t]=Co(t,this.options).then(function(t){return Bo(t,e.options.imageTimeout||0)}),t;if(!0===this.options.useCORS&&va.SUPPORT_CORS_IMAGES)return this.addImage(t,t,!0)}}}},{key:"inlineImage",value:function(t){var e=this;return Mo(t)?Bo(t,this.options.imageTimeout||0):this.hasImageInCache(t)?this.cache[t]:this.isSameOrigin(t)||"string"!=typeof this.options.proxy?this.xhrImage(t):this.cache[t]=Co(t,this.options).then(function(t){return Bo(t,e.options.imageTimeout||0)})}},{key:"xhrImage",value:function(t){var e=this;return this.cache[t]=new $n(function(n,i){var r=new XMLHttpRequest;if(r.onreadystatechange=function(){if(4===r.readyState)if(200!==r.status)i("Failed to fetch image "+t.substring(0,256)+" with status code "+r.status);else{var e=new FileReader;e.addEventListener("load",function(){return n(e.result)},!1),e.addEventListener("error",function(t){return i(t)},!1),e.readAsDataURL(r.response)}},r.responseType="blob",e.options.imageTimeout){var a=e.options.imageTimeout;r.timeout=a,r.ontimeout=function(){return i("")}}r.open("GET",t,!0),r.send()}).then(function(t){return Bo(t,e.options.imageTimeout||0)}),this.cache[t]}},{key:"loadCanvas",value:function(t){var e=String(this._index++);return this.cache[e]=$n.resolve(t),e}},{key:"hasImageInCache",value:function(t){return void 0!==this.cache[t]}},{key:"addImage",value:function(t,e,n){var i=this,r=function(t){return new $n(function(r,a){var o=new Image;if(o.onload=function(){return r(o)},t&&!n||(o.crossOrigin="anonymous"),o.onerror=a,o.src=e,!0===o.complete&&setTimeout(function(){r(o)},500),i.options.imageTimeout){var s=i.options.imageTimeout;setTimeout(function(){return a("")},s)}})};return this.cache[t]=Ao(e)&&!No(e)?va.SUPPORT_BASE64_DRAWING(e).then(r):r(!0),t}},{key:"isSameOrigin",value:function(t){return this.getOrigin(t)===this.origin}},{key:"getOrigin",value:function(t){var e=this._link||(this._link=this._window.document.createElement("a"));return e.href=t,e.href=e.href,e.protocol+e.hostname+e.port}},{key:"ready",value:function(){var t=this,e=mr(this.cache);return $n.all(e.map(function(e){return t.cache[e].catch(function(t){return null})})).then(function(t){return new Oo(e,t)})}}]),t}(),Oo=function(){function t(e,n){Kn(this,t),this._keys=e,this._images=n}return ti(t,[{key:"get",value:function(t){var e=this._keys.indexOf(t);return-1===e?null:this._images[e]}}]),t}(),ko=/^data:image\/svg\+xml/i,Io=/^data:image\/.*;base64,/i,Ro=/^data:image\/.*/i,Mo=function(t){return Ro.test(t)},Ao=function(t){return Io.test(t)},No=function(t){return"svg"===t.substr(-3).toLowerCase()||ko.test(t)},Bo=function(t,e){return new $n(function(n,i){var r=new Image;r.onload=function(){return n(r)},r.onerror=i,r.src=t,!0===r.complete&&setTimeout(function(){n(r)},500),e&&setTimeout(function(){return i("")},e)})},_o=function(){function t(e,n,i,r,a){Kn(this,t),this.referenceElement=e,this.scrolledElements=[],this.copyStyles=r,this.inlineImages=r,this.logger=i,this.options=n,this.renderer=a,this.imageLoader=new So(n,i,window),this.documentElement=this.cloneNode(e.ownerDocument.documentElement)}return ti(t,[{key:"inlineAllImages",value:function(t){var e=this;if(this.inlineImages&&t){var n=t.style;$n.all(dr(n.backgroundImage).map(function(t){return"url"===t.method?e.imageLoader.inlineImage(t.args[0]).then(function(t){return t?'url("'+t.src+'")':"none"}).catch(function(t){}):$n.resolve(""+t.prefix+t.method+"("+t.args.join(",")+")")})).then(function(t){t.length>1&&(n.backgroundColor=""),n.backgroundImage=t.join(",")}),t instanceof HTMLImageElement&&this.imageLoader.inlineImage(t.src).then(function(e){if(e&&t instanceof HTMLImageElement&&t.parentNode){var n=t.parentNode,i=Mi(t.style,e.cloneNode(!1));n.replaceChild(i,t)}}).catch(function(t){})}}},{key:"createElementClone",value:function(t){var e=this;if(this.copyStyles&&t instanceof HTMLCanvasElement){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch(t){}}if(t instanceof HTMLIFrameElement){var i=t.cloneNode(!1),r=qo();return i.setAttribute("data-html2canvas-internal-iframe-key",r),this.imageLoader.cache[r]=$o(t,this.options).then(function(t){return e.renderer(t,{async:e.options.async,allowTaint:e.options.allowTaint,backgroundColor:"#ffffff",canvas:null,imageTimeout:e.options.imageTimeout,proxy:e.options.proxy,removeContainer:e.options.removeContainer,scale:e.options.scale,target:new ki,type:"view",windowWidth:t.ownerDocument.defaultView.innerWidth,windowHeight:t.ownerDocument.defaultView.innerHeight,offsetX:t.ownerDocument.defaultView.pageXOffset,offsetY:t.ownerDocument.defaultView.pageYOffset},e.logger.child(r))}).then(function(e){var n=document.createElement("img");return n.src=e.toDataURL(),i.parentNode&&i.parentNode.replaceChild(Mi(t.ownerDocument.defaultView.getComputedStyle(t),n),i),e}),i}return t.cloneNode(!1)}},{key:"cloneNode",value:function(t){var e=t.nodeType===Node.TEXT_NODE?document.createTextNode(t.nodeValue):this.createElementClone(t),n=t.ownerDocument.defaultView;this.referenceElement===t&&e instanceof n.HTMLElement&&(this.clonedReferenceElement=e),e instanceof n.HTMLBodyElement&&zo(e);for(var i=t.firstChild;i;i=i.nextSibling)i.nodeType===Node.ELEMENT_NODE&&"SCRIPT"===i.nodeName||this.copyStyles&&"STYLE"===i.nodeName||e.appendChild(this.cloneNode(i));if(t instanceof n.HTMLElement&&e instanceof n.HTMLElement)switch(this.inlineAllImages(Do(t,e,Uo)),this.inlineAllImages(Do(t,e,Wo)),!this.copyStyles||t instanceof HTMLIFrameElement||Mi(t.ownerDocument.defaultView.getComputedStyle(t),e),this.inlineAllImages(e),0===t.scrollTop&&0===t.scrollLeft||this.scrolledElements.push([t,t.scrollLeft,t.scrollTop]),t.nodeName){case"CANVAS":this.copyStyles||Vo(t,e);break;case"TEXTAREA":case"SELECT":e.value=t.value}return e}}]),t}(),Lo=function(t,e,n){!t.defaultView||e===t.defaultView.pageXOffset&&n===t.defaultView.pageYOffset||t.defaultView.scrollTo(e,n)},Vo=function(t,e){try{e&&(e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t.getContext("2d").getImageData(0,0,t.width,t.height),0,0))}catch(t){}},Do=function(t,e,n){var i=t.ownerDocument.defaultView.getComputedStyle(t,n);if(i&&i.content&&"none"!==i.content&&"-moz-alt-content"!==i.content&&"none"!==i.display){var r=Fo(i.content),a=r.match(Go),o=e.ownerDocument.createElement(a?"img":"html2canvaspseudoelement");return a?o.src=Fo(a[1]):o.textContent=r,Mi(i,o),o.className=Xo+" "+jo,e.className+=n===Uo?" "+Xo:" "+jo,n===Uo?e.insertBefore(o,e.firstChild):e.appendChild(o),o}},Fo=function(t){var e=t.substr(0,1);return e===t.substr(t.length-1)&&e.match(/['"]/)?t.substr(1,t.length-2):t},Go=/^url\((.+)\)$/i,Uo=":before",Wo=":after",Xo="___html2canvas___pseudoelement_before",jo="___html2canvas___pseudoelement_after",zo=function(t){Ho(t,"."+Xo+Uo+'{\n    content: "" !important;\n    display: none !important;\n}\n         .'+jo+Wo+'{\n    content: "" !important;\n    display: none !important;\n}')},Ho=function(t,e){var n=t.ownerDocument.createElement("style");n.innerHTML=e,t.appendChild(n)},Yo=function(t){var e=si(t,3),n=e[0],i=e[1],r=e[2];n.scrollLeft=i,n.scrollTop=r},qo=function(){return Math.ceil(Date.now()+1e7*Math.random()).toString(16)},$o=function(t,e){try{return $n.resolve(t.contentWindow.document.documentElement)}catch(t){return $n.reject()}},Ko=function(t,e,n,i,r,a){var o=new _o(n,i,r,!1,a),s=t.createElement("iframe");return s.className="html2canvas-container",s.style.visibility="hidden",s.style.position="fixed",s.style.left="-10000px",s.style.top="0px",s.style.border="0",s.width=e.width.toString(),s.height=e.height.toString(),s.scrolling="no",t.body?(t.body.appendChild(s),new $n(function(t,r){var a=s.contentWindow,l=a.document;a.onload=s.onload=function(){var n=setInterval(function(){l.body.childNodes.length>0&&(o.scrolledElements.forEach(Yo),clearInterval(n),"view"===i.type&&(a.scrollTo(e.left,e.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||a.scrollY===e.top&&a.scrollX===e.left||(l.documentElement.style.top=-e.top+"px",l.documentElement.style.left=-e.left+"px",l.documentElement.style.position="absolute")),o.clonedReferenceElement instanceof a.HTMLElement||o.clonedReferenceElement instanceof HTMLElement?t([s,o.clonedReferenceElement,o.imageLoader]):r(""))},50)},l.open(),l.write("<!DOCTYPE html><html></html>"),Lo(n.ownerDocument,e.left,e.top),l.replaceChild(l.adoptNode(o.documentElement),l.documentElement),l.close()})):$n.reject("")},Zo=function t(e,n,i){var r=e.ownerDocument,a=new Di(n.offsetX,n.offsetY,n.windowWidth,n.windowHeight),o="view"===n.type?a:Wi(r),s=r.documentElement?new vi(getComputedStyle(r.documentElement).backgroundColor):wi,l=r.body?new vi(getComputedStyle(r.body).backgroundColor):wi,u=e===r.documentElement?s.isTransparent()?l.isTransparent()?n.backgroundColor?new vi(n.backgroundColor):null:l:s:n.backgroundColor?new vi(n.backgroundColor):null;return va.SUPPORT_FOREIGNOBJECT_DRAWING.then(function(s){return s?function(t){return t.imageLoader.ready().then(function(){return new la(t.clonedReferenceElement).render({bounds:o,backgroundColor:u,logger:i,scale:n.scale})})}(new _o(e,n,i,!0,t)):Ko(r,a,e,n,i,t).then(function(t){var e=si(t,3),r=e[0],a=e[1],s=e[2],l=eo(a,s),h=a.ownerDocument,c=o.width,f=o.height;return u===l.container.style.background.backgroundColor&&(l.container.style.background.backgroundColor=wi),s.ready().then(function(t){!0===n.removeContainer&&r.parentNode&&r.parentNode.removeChild(r);var e=new so(h),a={backgroundColor:u,fontMetrics:e,imageStore:t,logger:i,scale:n.scale,width:c,height:f};return Array.isArray(n.target)?$n.all(n.target.map(function(t){return new xo(t,a).render(l)})):new xo(n.target,a).render(l)})})})},Jo=function(t,e){"object"===("undefined"==typeof console?"undefined":je(console))&&"function"==typeof console.log&&console.log("html2canvas 1.0.0-alpha.1");var n=e||{},i=new Ii,r=t.ownerDocument.defaultView,a={async:!0,allowTaint:!1,imageTimeout:15e3,proxy:null,removeContainer:!0,scale:r.devicePixelRatio||1,target:new ki(n.canvas),type:null,windowWidth:r.innerWidth,windowHeight:r.innerHeight,offsetX:r.pageXOffset,offsetY:r.pageYOffset},o=Zo(t,mt({},a,n),i);return o.catch(function(t){throw i.error(t),t})};Jo.CanvasRenderer=ki;var Qo=function(t){this.ok=!1,this.alpha=1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};t=e[t]||t;for(var n=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseFloat(t[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],i=0;i<n.length;i++){var r=n[i].re,a=n[i].process,o=r.exec(t);if(o){var s=a(o);this.r=s[0],this.g=s[1],this.b=s[2],s.length>3&&(this.alpha=s[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n},this.getHelpXML=function(){for(var t=new Array,i=0;i<n.length;i++)for(var r=n[i].example,a=0;a<r.length;a++)t[t.length]=r[a];for(var o in e)t[t.length]=o;var s=document.createElement("ul");s.setAttribute("id","rgbcolor-examples");for(i=0;i<t.length;i++)try{var l=document.createElement("li"),u=new RGBColor(t[i]),h=document.createElement("div");h.style.cssText="margin: 3px; border: 1px solid black; background:"+u.toHex()+"; color:"+u.toHex(),h.appendChild(document.createTextNode("test"));var c=document.createTextNode(" "+t[i]+" -> "+u.toRGB()+" -> "+u.toHex());l.appendChild(h),l.appendChild(c),s.appendChild(l)}catch(t){}return s}},ts=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],es=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],ns=function(t,e,n,i){if(!(isNaN(i)||i<1)){var r,a,o,s,l,u,c,f,d,p,m,g,y,v,b,w,x,E,T,P,C,S,O,k,I=(i|=0)+i+1,R=e-1,M=n-1,A=i+1,N=A*(A+1)/2,B=new h,_=B;for(o=1;o<I;o++)if(_=_.next=new h,o==A)var L=_;_.next=B;var V=null,D=null;c=u=0;var F=ts[i],G=es[i];for(a=0;a<n;a++){for(w=x=E=T=f=d=p=m=0,g=A*(P=t[u]),y=A*(C=t[u+1]),v=A*(S=t[u+2]),b=A*(O=t[u+3]),f+=N*P,d+=N*C,p+=N*S,m+=N*O,_=B,o=0;o<A;o++)_.r=P,_.g=C,_.b=S,_.a=O,_=_.next;for(o=1;o<A;o++)s=u+((R<o?R:o)<<2),f+=(_.r=P=t[s])*(k=A-o),d+=(_.g=C=t[s+1])*k,p+=(_.b=S=t[s+2])*k,m+=(_.a=O=t[s+3])*k,w+=P,x+=C,E+=S,T+=O,_=_.next;for(V=B,D=L,r=0;r<e;r++)t[u+3]=O=m*F>>G,0!=O?(O=255/O,t[u]=(f*F>>G)*O,t[u+1]=(d*F>>G)*O,t[u+2]=(p*F>>G)*O):t[u]=t[u+1]=t[u+2]=0,f-=g,d-=y,p-=v,m-=b,g-=V.r,y-=V.g,v-=V.b,b-=V.a,s=c+((s=r+i+1)<R?s:R)<<2,f+=w+=V.r=t[s],d+=x+=V.g=t[s+1],p+=E+=V.b=t[s+2],m+=T+=V.a=t[s+3],V=V.next,g+=P=D.r,y+=C=D.g,v+=S=D.b,b+=O=D.a,w-=P,x-=C,E-=S,T-=O,D=D.next,u+=4;c+=e}for(r=0;r<e;r++){for(x=E=T=w=d=p=m=f=0,g=A*(P=t[u=r<<2]),y=A*(C=t[u+1]),v=A*(S=t[u+2]),b=A*(O=t[u+3]),f+=N*P,d+=N*C,p+=N*S,m+=N*O,_=B,o=0;o<A;o++)_.r=P,_.g=C,_.b=S,_.a=O,_=_.next;for(l=e,o=1;o<=i;o++)u=l+r<<2,f+=(_.r=P=t[u])*(k=A-o),d+=(_.g=C=t[u+1])*k,p+=(_.b=S=t[u+2])*k,m+=(_.a=O=t[u+3])*k,w+=P,x+=C,E+=S,T+=O,_=_.next,o<M&&(l+=e);for(u=r,V=B,D=L,a=0;a<n;a++)t[3+(s=u<<2)]=O=m*F>>G,O>0?(O=255/O,t[s]=(f*F>>G)*O,t[s+1]=(d*F>>G)*O,t[s+2]=(p*F>>G)*O):t[s]=t[s+1]=t[s+2]=0,f-=g,d-=y,p-=v,m-=b,g-=V.r,y-=V.g,v-=V.b,b-=V.a,s=r+((s=a+A)<M?s:M)*e<<2,f+=w+=V.r=t[s],d+=x+=V.g=t[s+1],p+=E+=V.b=t[s+2],m+=T+=V.a=t[s+3],V=V.next,g+=P=D.r,y+=C=D.g,v+=S=D.b,b+=O=D.a,w-=P,x-=C,E-=S,T-=O,D=D.next,u+=e}}},is=n(function(t){!function(e,n){t.exports&&(t.exports=n(Qo,ns)),e.canvg=n(e.RGBColor,e.stackBlur)}("undefined"!=typeof window?window:p,function(t,e){function n(t){var e=[0,0,0],n=function(n,i){var r=t.match(n);null!=r&&(e[i]+=r.length,t=t.replace(n," "))};return t=t.replace(/:not\(([^\)]*)\)/g,"     $1 "),t=t.replace(/{[\s\S]*/gm," "),n(s,1),n(l,0),n(u,1),n(h,2),n(c,1),n(f,1),t=t.replace(/[\*\s\+>~]/g," "),t=t.replace(/[#\.]/g," "),n(d,2),e.join("")}function r(r){var o={opts:r};o.FRAMERATE=30,o.MAX_VIRTUAL_PIXELS=3e4,o.log=function(t){},1==o.opts.log&&"undefined"!=typeof console&&(o.log=function(t){console.log(t)}),o.init=function(t){var e=0;o.UniqueId=function(){return"canvg"+ ++e},o.Definitions={},o.Styles={},o.StylesSpecificity={},o.Animations=[],o.Images=[],o.ctx=t,o.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(t,e){this.viewPorts.push({width:t,height:e})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(t){return null!=t&&"number"==typeof t?t:"x"==t?this.width():"y"==t?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},o.init(),o.ImagesLoaded=function(){for(var t=0;t<o.Images.length;t++)if(!o.Images[t].loaded)return!1;return!0},o.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},o.compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},o.ajax=function(t){var e;return(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"))?(e.open("GET",t,!1),e.send(null),e.responseText):null},o.parseXml=function(t){if("undefined"!=typeof Windows&&void 0!==Windows.Data&&void 0!==Windows.Data.Xml){var e=new Windows.Data.Xml.Dom.XmlDocument,n=new Windows.Data.Xml.Dom.XmlLoadSettings;return n.prohibitDtd=!1,e.loadXml(t,n),e}if(!window.DOMParser)return t=t.replace(/<!DOCTYPE svg[^>]*>/,""),(e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t),e;try{var i=new DOMParser;return i.parseFromString(t,"image/svg+xml")}catch(e){return(i=new DOMParser).parseFromString(t,"text/xml")}},o.Property=function(t,e){this.name=t,this.value=e},o.Property.prototype.getValue=function(){return this.value},o.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},o.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var t=parseFloat(this.value);return(this.value+"").match(/%$/)&&(t/=100),t},o.Property.prototype.valueOrDefault=function(t){return this.hasValue()?this.value:t},o.Property.prototype.numValueOrDefault=function(t){return this.hasValue()?this.numValue():t},o.Property.prototype.addOpacity=function(e){var n=this.value;if(null!=e.value&&""!=e.value&&"string"==typeof this.value){var i=new t(this.value);i.ok&&(n="rgba("+i.r+", "+i.g+", "+i.b+", "+e.numValue()+")")}return new o.Property(this.name,n)},o.Property.prototype.getDefinition=function(){var t=this.value.match(/#([^\)'"]+)/);return t&&(t=t[1]),t||(t=this.value),o.Definitions[t]},o.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},o.Property.prototype.getFillStyleDefinition=function(t,e){var n=this.getDefinition();if(null!=n&&n.createGradient)return n.createGradient(o.ctx,t,e);if(null!=n&&n.createPattern){if(n.getHrefAttribute().hasValue()){var i=n.attribute("patternTransform");n=n.getHrefAttribute().getDefinition(),i.hasValue()&&(n.attribute("patternTransform",!0).value=i.value)}return n.createPattern(o.ctx,t)}return null},o.Property.prototype.getDPI=function(t){return 96},o.Property.prototype.getEM=function(t){var e=12,n=new o.Property("fontSize",o.Font.Parse(o.ctx.font).fontSize);return n.hasValue()&&(e=n.toPixels(t)),e},o.Property.prototype.getUnits=function(){return(this.value+"").replace(/[0-9\.\-]/g,"")},o.Property.prototype.toPixels=function(t,e){if(!this.hasValue())return 0;var n=this.value+"";if(n.match(/em$/))return this.numValue()*this.getEM(t);if(n.match(/ex$/))return this.numValue()*this.getEM(t)/2;if(n.match(/px$/))return this.numValue();if(n.match(/pt$/))return this.numValue()*this.getDPI(t)*(1/72);if(n.match(/pc$/))return 15*this.numValue();if(n.match(/cm$/))return this.numValue()*this.getDPI(t)/2.54;if(n.match(/mm$/))return this.numValue()*this.getDPI(t)/25.4;if(n.match(/in$/))return this.numValue()*this.getDPI(t);if(n.match(/%$/))return this.numValue()*o.ViewPort.ComputeSize(t);var i=this.numValue();return e&&i<1?i*o.ViewPort.ComputeSize(t):i},o.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/s$/)?1e3*this.numValue():(t.match(/ms$/),this.numValue())},o.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/deg$/)?this.numValue()*(Math.PI/180):t.match(/grad$/)?this.numValue()*(Math.PI/200):t.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var s={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return o.Property.prototype.toTextBaseline=function(){return this.hasValue()?s[this.value]:null},o.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(t,e,n,i,r,a){var s=null!=a?this.Parse(a):this.CreateFont("","","","","",o.ctx.font);return{fontFamily:r||s.fontFamily,fontSize:i||s.fontSize,fontStyle:t||s.fontStyle,fontWeight:n||s.fontWeight,fontVariant:e||s.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var t=this;this.Parse=function(e){for(var n={},i=o.trim(o.compressSpaces(e||"")).split(" "),r={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},a="",s=0;s<i.length;s++)r.fontStyle||-1==t.Styles.indexOf(i[s])?r.fontVariant||-1==t.Variants.indexOf(i[s])?r.fontWeight||-1==t.Weights.indexOf(i[s])?r.fontSize?"inherit"!=i[s]&&(a+=i[s]):("inherit"!=i[s]&&(n.fontSize=i[s].split("/")[0]),r.fontStyle=r.fontVariant=r.fontWeight=r.fontSize=!0):("inherit"!=i[s]&&(n.fontWeight=i[s]),r.fontStyle=r.fontVariant=r.fontWeight=!0):("inherit"!=i[s]&&(n.fontVariant=i[s]),r.fontStyle=r.fontVariant=!0):("inherit"!=i[s]&&(n.fontStyle=i[s]),r.fontStyle=!0);return""!=a&&(n.fontFamily=a),n}},o.ToNumberArray=function(t){for(var e=o.trim(o.compressSpaces((t||"").replace(/,/g," "))).split(" "),n=0;n<e.length;n++)e[n]=parseFloat(e[n]);return e},o.Point=function(t,e){this.x=t,this.y=e},o.Point.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},o.Point.prototype.applyTransform=function(t){var e=this.x*t[0]+this.y*t[2]+t[4],n=this.x*t[1]+this.y*t[3]+t[5];this.x=e,this.y=n},o.CreatePoint=function(t){var e=o.ToNumberArray(t);return new o.Point(e[0],e[1])},o.CreatePath=function(t){for(var e=o.ToNumberArray(t),n=[],i=0;i<e.length;i+=2)n.push(new o.Point(e[i],e[i+1]));return n},o.BoundingBox=function(t,e,n,r){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)},this.addQuadraticCurve=function(t,e,n,i,r,a){var o=t+2/3*(n-t),s=e+2/3*(i-e),l=o+1/3*(r-t),u=s+1/3*(a-e);this.addBezierCurve(t,e,o,l,s,u,r,a)},this.addBezierCurve=function(t,e,n,r,a,o,s,l){var u=[t,e],h=[n,r],c=[a,o],f=[s,l];for(this.addPoint(u[0],u[1]),this.addPoint(f[0],f[1]),i=0;i<=1;i++){var d=function(t){return Math.pow(1-t,3)*u[i]+3*Math.pow(1-t,2)*t*h[i]+3*(1-t)*Math.pow(t,2)*c[i]+Math.pow(t,3)*f[i]},p=6*u[i]-12*h[i]+6*c[i],m=-3*u[i]+9*h[i]-9*c[i]+3*f[i],g=3*h[i]-3*u[i];if(0!=m){var y=Math.pow(p,2)-4*g*m;if(!(y<0)){var v=(-p+Math.sqrt(y))/(2*m);0<v&&v<1&&(0==i&&this.addX(d(v)),1==i&&this.addY(d(v)));var b=(-p-Math.sqrt(y))/(2*m);0<b&&b<1&&(0==i&&this.addX(d(b)),1==i&&this.addY(d(b)))}}else{if(0==p)continue;var w=-g/p;0<w&&w<1&&(0==i&&this.addX(d(w)),1==i&&this.addY(d(w)))}}},this.isPointInBox=function(t,e){return this.x1<=t&&t<=this.x2&&this.y1<=e&&e<=this.y2},this.addPoint(t,e),this.addPoint(n,r)},o.Transform=function(t){var e=this;this.Type={},this.Type.translate=function(t){this.p=o.CreatePoint(t),this.apply=function(t){t.translate(this.p.x||0,this.p.y||0)},this.unapply=function(t){t.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(t){t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(t){var e=o.ToNumberArray(t);this.angle=new o.Property("angle",e[0]),this.cx=e[1]||0,this.cy=e[2]||0,this.apply=function(t){t.translate(this.cx,this.cy),t.rotate(this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.unapply=function(t){t.translate(this.cx,this.cy),t.rotate(-1*this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.applyToPoint=function(t){var e=this.angle.toRadians();t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),t.applyTransform([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]),t.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(t){this.p=o.CreatePoint(t),this.apply=function(t){t.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(t){t.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(t){t.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(t){this.m=o.ToNumberArray(t),this.apply=function(t){t.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(t){var e=this.m[0],n=this.m[2],i=this.m[4],r=this.m[1],a=this.m[3],o=this.m[5],s=1/(e*(1*a-0*o)-n*(1*r-0*o)+i*(0*r-0*a));t.transform(s*(1*a-0*o),s*(0*o-1*r),s*(0*i-1*n),s*(1*e-0*i),s*(n*o-i*a),s*(i*r-e*o))},this.applyToPoint=function(t){t.applyTransform(this.m)}},this.Type.SkewBase=function(t){this.base=e.Type.matrix,this.base(t),this.angle=new o.Property("angle",t)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(t){this.base=e.Type.SkewBase,this.base(t),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(t){this.base=e.Type.SkewBase,this.base(t),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(t)},this.unapply=function(t){for(var e=this.transforms.length-1;e>=0;e--)this.transforms[e].unapply(t)},this.applyToPoint=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].applyToPoint(t)};for(var n=o.trim(o.compressSpaces(t)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),i=0;i<n.length;i++){var r=o.trim(n[i].split("(")[0]),a=n[i].split("(")[1].replace(")",""),s=this.Type[r];if(void 0!==s){var l=new s(a);l.type=r,this.transforms.push(l)}}},o.AspectRatio=function(t,e,n,i,r,a,s,l,u,h){var c=(e=(e=o.compressSpaces(e)).replace(/^defer\s/,"")).split(" ")[0]||"xMidYMid",f=e.split(" ")[1]||"meet",d=n/i,p=r/a,m=Math.min(d,p),g=Math.max(d,p);"meet"==f&&(i*=m,a*=m),"slice"==f&&(i*=g,a*=g),u=new o.Property("refX",u),h=new o.Property("refY",h),u.hasValue()&&h.hasValue()?t.translate(-m*u.toPixels("x"),-m*h.toPixels("y")):(c.match(/^xMid/)&&("meet"==f&&m==p||"slice"==f&&g==p)&&t.translate(n/2-i/2,0),c.match(/YMid$/)&&("meet"==f&&m==d||"slice"==f&&g==d)&&t.translate(0,r/2-a/2),c.match(/^xMax/)&&("meet"==f&&m==p||"slice"==f&&g==p)&&t.translate(n-i,0),c.match(/YMax$/)&&("meet"==f&&m==d||"slice"==f&&g==d)&&t.translate(0,r-a)),"none"==c?t.scale(d,p):"meet"==f?t.scale(m,m):"slice"==f&&t.scale(g,g),t.translate(null==s?0:-s,null==l?0:-l)},o.Element={},o.EmptyProperty=new o.Property("EMPTY",""),o.Element.ElementBase=function(t){this.attributes={},this.styles={},this.stylesSpecificity={},this.children=[],this.attribute=function(t,e){var n=this.attributes[t];return null!=n?n:(1==e&&(n=new o.Property(t,""),this.attributes[t]=n),n||o.EmptyProperty)},this.getHrefAttribute=function(){for(var t in this.attributes)if("href"==t||t.match(/:href$/))return this.attributes[t];return o.EmptyProperty},this.style=function(t,e,n){var i=this.styles[t];if(null!=i)return i;var r=this.attribute(t);if(null!=r&&r.hasValue())return this.styles[t]=r,r;if(1!=n){var a=this.parent;if(null!=a){var s=a.style(t);if(null!=s&&s.hasValue())return s}}return 1==e&&(i=new o.Property(t,""),this.styles[t]=i),i||o.EmptyProperty},this.render=function(t){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(t.save(),this.style("mask").hasValue()){var e=this.style("mask").getDefinition();null!=e&&e.apply(t,this)}else if(this.style("filter").hasValue()){var n=this.style("filter").getDefinition();null!=n&&n.apply(t,this)}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}},this.setContext=function(t){},this.clearContext=function(t){},this.renderChildren=function(t){for(var e=0;e<this.children.length;e++)this.children[e].render(t)},this.addChild=function(t,e){var n=t;e&&(n=o.CreateElement(t)),n.parent=this,"title"!=n.type&&this.children.push(n)},this.addStylesFromStyleDefinition=function(){for(var e in o.Styles)if("@"!=e[0]&&a(t,e)){var n=o.Styles[e],i=o.StylesSpecificity[e];if(null!=n)for(var r in n){var s=this.stylesSpecificity[r];void 0===s&&(s="000"),i>s&&(this.styles[r]=n[r],this.stylesSpecificity[r]=i)}}};var e=new RegExp("^[A-Z-]+$");if(null!=t&&1==t.nodeType){for(s=0;s<t.attributes.length;s++){var n=t.attributes[s],i=function(t){return e.test(t)?t.toLowerCase():t}(n.nodeName);this.attributes[i]=new o.Property(i,n.value)}if(this.addStylesFromStyleDefinition(),this.attribute("style").hasValue())for(var r=this.attribute("style").value.split(";"),s=0;s<r.length;s++)if(""!=o.trim(r[s])){var l=r[s].split(":"),u=o.trim(l[0]),h=o.trim(l[1]);this.styles[u]=new o.Property(u,h)}this.attribute("id").hasValue()&&null==o.Definitions[this.attribute("id").value]&&(o.Definitions[this.attribute("id").value]=this);for(s=0;s<t.childNodes.length;s++){var c=t.childNodes[s];if(1==c.nodeType&&this.addChild(c,!0),this.captureTextNodes&&(3==c.nodeType||4==c.nodeType)){var f=c.value||c.text||c.textContent||"";""!=o.compressSpaces(f)&&this.addChild(new o.Element.tspan(c),!1)}}}},o.Element.RenderedElementBase=function(t){this.base=o.Element.ElementBase,this.base(t),this.setContext=function(t){if(this.style("fill").isUrlDefinition()?null!=(n=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity")))&&(t.fillStyle=n):this.style("fill").hasValue()&&("currentColor"==(e=this.style("fill")).value&&(e.value=this.style("color").value),"inherit"!=e.value&&(t.fillStyle="none"==e.value?"rgba(0,0,0,0)":e.value)),this.style("fill-opacity").hasValue()){var e=new o.Property("fill",t.fillStyle);e=e.addOpacity(this.style("fill-opacity")),t.fillStyle=e.value}if(this.style("stroke").isUrlDefinition()){var n=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=n&&(t.strokeStyle=n)}else this.style("stroke").hasValue()&&("currentColor"==(i=this.style("stroke")).value&&(i.value=this.style("color").value),"inherit"!=i.value&&(t.strokeStyle="none"==i.value?"rgba(0,0,0,0)":i.value));if(this.style("stroke-opacity").hasValue()){var i=new o.Property("stroke",t.strokeStyle);i=i.addOpacity(this.style("stroke-opacity")),t.strokeStyle=i.value}if(this.style("stroke-width").hasValue()){var r=this.style("stroke-width").toPixels();t.lineWidth=0==r?.001:r}if(this.style("stroke-linecap").hasValue()&&(t.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(t.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(t.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var a=o.ToNumberArray(this.style("stroke-dasharray").value);void 0!==t.setLineDash?t.setLineDash(a):void 0!==t.webkitLineDash?t.webkitLineDash=a:void 0===t.mozDash||1==a.length&&0==a[0]||(t.mozDash=a);var s=this.style("stroke-dashoffset").numValueOrDefault(1);void 0!==t.lineDashOffset?t.lineDashOffset=s:void 0!==t.webkitLineDashOffset?t.webkitLineDashOffset=s:void 0!==t.mozDashOffset&&(t.mozDashOffset=s)}if(void 0!==t.font&&(t.font=o.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.style("transform",!1,!0).hasValue()&&new o.Transform(this.style("transform",!1,!0).value).apply(t),this.style("clip-path",!1,!0).hasValue()){var l=this.style("clip-path",!1,!0).getDefinition();null!=l&&l.apply(t)}this.style("opacity").hasValue()&&(t.globalAlpha=this.style("opacity").numValue())}},o.Element.RenderedElementBase.prototype=new o.Element.ElementBase,o.Element.PathElementBase=function(t){this.base=o.Element.RenderedElementBase,this.base(t),this.path=function(t){return null!=t&&t.beginPath(),new o.BoundingBox},this.renderChildren=function(t){this.path(t),o.Mouse.checkPath(this,t),""!=t.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?t.fill(this.style("fill-rule").value):t.fill()),""!=t.strokeStyle&&t.stroke();var e=this.getMarkers();if(null!=e){if(this.style("marker-start").isUrlDefinition()&&(n=this.style("marker-start").getDefinition()).render(t,e[0][0],e[0][1]),this.style("marker-mid").isUrlDefinition())for(var n=this.style("marker-mid").getDefinition(),i=1;i<e.length-1;i++)n.render(t,e[i][0],e[i][1]);this.style("marker-end").isUrlDefinition()&&(n=this.style("marker-end").getDefinition()).render(t,e[e.length-1][0],e[e.length-1][1])}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},o.Element.PathElementBase.prototype=new o.Element.RenderedElementBase,o.Element.svg=function(t){this.base=o.Element.RenderedElementBase,this.base(t),this.baseClearContext=this.clearContext,this.clearContext=function(t){this.baseClearContext(t),o.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,void 0!==t.font&&void 0!==window.getComputedStyle&&(t.font=window.getComputedStyle(t.canvas).getPropertyValue("font")),this.baseSetContext(t),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),t.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var e=o.ViewPort.width(),n=o.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),void 0===this.root){e=this.attribute("width").toPixels("x"),n=this.attribute("height").toPixels("y");var i=0,r=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(i=-this.attribute("refX").toPixels("x"),r=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(t.beginPath(),t.moveTo(i,r),t.lineTo(e,r),t.lineTo(e,n),t.lineTo(i,n),t.closePath(),t.clip())}if(o.ViewPort.SetCurrent(e,n),this.attribute("viewBox").hasValue()){var a=o.ToNumberArray(this.attribute("viewBox").value),s=a[0],l=a[1];e=a[2],n=a[3],o.AspectRatio(t,this.attribute("preserveAspectRatio").value,o.ViewPort.width(),e,o.ViewPort.height(),n,s,l,this.attribute("refX").value,this.attribute("refY").value),o.ViewPort.RemoveCurrent(),o.ViewPort.SetCurrent(a[2],a[3])}}},o.Element.svg.prototype=new o.Element.RenderedElementBase,o.Element.rect=function(t){this.base=o.Element.PathElementBase,this.base(t),this.path=function(t){var e=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y"),a=this.attribute("rx").toPixels("x"),s=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(s=a),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(a=s),a=Math.min(a,i/2),s=Math.min(s,r/2),null!=t&&(t.beginPath(),t.moveTo(e+a,n),t.lineTo(e+i-a,n),t.quadraticCurveTo(e+i,n,e+i,n+s),t.lineTo(e+i,n+r-s),t.quadraticCurveTo(e+i,n+r,e+i-a,n+r),t.lineTo(e+a,n+r),t.quadraticCurveTo(e,n+r,e,n+r-s),t.lineTo(e,n+s),t.quadraticCurveTo(e,n,e+a,n),t.closePath()),new o.BoundingBox(e,n,e+i,n+r)}},o.Element.rect.prototype=new o.Element.PathElementBase,o.Element.circle=function(t){this.base=o.Element.PathElementBase,this.base(t),this.path=function(t){var e=this.attribute("cx").toPixels("x"),n=this.attribute("cy").toPixels("y"),i=this.attribute("r").toPixels();return null!=t&&(t.beginPath(),t.arc(e,n,i,0,2*Math.PI,!0),t.closePath()),new o.BoundingBox(e-i,n-i,e+i,n+i)}},o.Element.circle.prototype=new o.Element.PathElementBase,o.Element.ellipse=function(t){this.base=o.Element.PathElementBase,this.base(t),this.path=function(t){var e=(Math.sqrt(2)-1)/3*4,n=this.attribute("rx").toPixels("x"),i=this.attribute("ry").toPixels("y"),r=this.attribute("cx").toPixels("x"),a=this.attribute("cy").toPixels("y");return null!=t&&(t.beginPath(),t.moveTo(r,a-i),t.bezierCurveTo(r+e*n,a-i,r+n,a-e*i,r+n,a),t.bezierCurveTo(r+n,a+e*i,r+e*n,a+i,r,a+i),t.bezierCurveTo(r-e*n,a+i,r-n,a+e*i,r-n,a),t.bezierCurveTo(r-n,a-e*i,r-e*n,a-i,r,a-i),t.closePath()),new o.BoundingBox(r-n,a-i,r+n,a+i)}},o.Element.ellipse.prototype=new o.Element.PathElementBase,o.Element.line=function(t){this.base=o.Element.PathElementBase,this.base(t),this.getPoints=function(){return[new o.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new o.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(t){var e=this.getPoints();return null!=t&&(t.beginPath(),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y)),new o.BoundingBox(e[0].x,e[0].y,e[1].x,e[1].y)},this.getMarkers=function(){var t=this.getPoints(),e=t[0].angleTo(t[1]);return[[t[0],e],[t[1],e]]}},o.Element.line.prototype=new o.Element.PathElementBase,o.Element.polyline=function(t){this.base=o.Element.PathElementBase,this.base(t),this.points=o.CreatePath(this.attribute("points").value),this.path=function(t){var e=new o.BoundingBox(this.points[0].x,this.points[0].y);null!=t&&(t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y));for(var n=1;n<this.points.length;n++)e.addPoint(this.points[n].x,this.points[n].y),null!=t&&t.lineTo(this.points[n].x,this.points[n].y);return e},this.getMarkers=function(){for(var t=[],e=0;e<this.points.length-1;e++)t.push([this.points[e],this.points[e].angleTo(this.points[e+1])]);return t.length>0&&t.push([this.points[this.points.length-1],t[t.length-1][1]]),t}},o.Element.polyline.prototype=new o.Element.PathElementBase,o.Element.polygon=function(t){this.base=o.Element.polyline,this.base(t),this.basePath=this.path,this.path=function(t){var e=this.basePath(t);return null!=t&&(t.lineTo(this.points[0].x,this.points[0].y),t.closePath()),e}},o.Element.polygon.prototype=new o.Element.polyline,o.Element.path=function(t){this.base=o.Element.PathElementBase,this.base(t);var e=this.attribute("d").value;e=e.replace(/,/gm," ");for(n=0;n<2;n++)e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");e=(e=e.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2");for(var n=0;n<2;n++)e=e.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");e=e.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),e=o.compressSpaces(e),e=o.trim(e),this.PathParser=new function(t){this.tokens=t.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new o.Point(0,0),this.control=new o.Point(0,0),this.current=new o.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var t=new o.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase()?this.current:new o.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,e,n){null!=n&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(n)),this.addMarkerAngle(t,null==e?null:e.angleTo(t))},this.addMarkerAngle=function(t,e){this.points.push(t),this.angles.push(e)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var e=t+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[t]=this.angles[e];break}return this.angles}}(e),this.path=function(t){var e=this.PathParser;e.reset();var n=new o.BoundingBox;for(null!=t&&t.beginPath();!e.isEnd();)switch(e.nextCommand(),e.command){case"M":case"m":r=e.getAsCurrentPoint();for(e.addMarker(r),n.addPoint(r.x,r.y),null!=t&&t.moveTo(r.x,r.y),e.start=e.current;!e.isCommandOrEnd();){r=e.getAsCurrentPoint();e.addMarker(r,e.start),n.addPoint(r.x,r.y),null!=t&&t.lineTo(r.x,r.y)}break;case"L":case"l":for(;!e.isCommandOrEnd();){var i=e.current,r=e.getAsCurrentPoint();e.addMarker(r,i),n.addPoint(r.x,r.y),null!=t&&t.lineTo(r.x,r.y)}break;case"H":case"h":for(;!e.isCommandOrEnd();){a=new o.Point((e.isRelativeCommand()?e.current.x:0)+e.getScalar(),e.current.y);e.addMarker(a,e.current),e.current=a,n.addPoint(e.current.x,e.current.y),null!=t&&t.lineTo(e.current.x,e.current.y)}break;case"V":case"v":for(;!e.isCommandOrEnd();){var a=new o.Point(e.current.x,(e.isRelativeCommand()?e.current.y:0)+e.getScalar());e.addMarker(a,e.current),e.current=a,n.addPoint(e.current.x,e.current.y),null!=t&&t.lineTo(e.current.x,e.current.y)}break;case"C":case"c":for(;!e.isCommandOrEnd();){var s=e.current,l=e.getPoint(),u=e.getAsControlPoint(),h=e.getAsCurrentPoint();e.addMarker(h,u,l),n.addBezierCurve(s.x,s.y,l.x,l.y,u.x,u.y,h.x,h.y),null!=t&&t.bezierCurveTo(l.x,l.y,u.x,u.y,h.x,h.y)}break;case"S":case"s":for(;!e.isCommandOrEnd();){var s=e.current,l=e.getReflectedControlPoint(),u=e.getAsControlPoint(),h=e.getAsCurrentPoint();e.addMarker(h,u,l),n.addBezierCurve(s.x,s.y,l.x,l.y,u.x,u.y,h.x,h.y),null!=t&&t.bezierCurveTo(l.x,l.y,u.x,u.y,h.x,h.y)}break;case"Q":case"q":for(;!e.isCommandOrEnd();){var s=e.current,u=e.getAsControlPoint(),h=e.getAsCurrentPoint();e.addMarker(h,u,u),n.addQuadraticCurve(s.x,s.y,u.x,u.y,h.x,h.y),null!=t&&t.quadraticCurveTo(u.x,u.y,h.x,h.y)}break;case"T":case"t":for(;!e.isCommandOrEnd();){var s=e.current,u=e.getReflectedControlPoint();e.control=u;h=e.getAsCurrentPoint();e.addMarker(h,u,u),n.addQuadraticCurve(s.x,s.y,u.x,u.y,h.x,h.y),null!=t&&t.quadraticCurveTo(u.x,u.y,h.x,h.y)}break;case"A":case"a":for(;!e.isCommandOrEnd();){var s=e.current,c=e.getScalar(),f=e.getScalar(),d=e.getScalar()*(Math.PI/180),p=e.getScalar(),m=e.getScalar(),h=e.getAsCurrentPoint(),g=new o.Point(Math.cos(d)*(s.x-h.x)/2+Math.sin(d)*(s.y-h.y)/2,-Math.sin(d)*(s.x-h.x)/2+Math.cos(d)*(s.y-h.y)/2),y=Math.pow(g.x,2)/Math.pow(c,2)+Math.pow(g.y,2)/Math.pow(f,2);y>1&&(c*=Math.sqrt(y),f*=Math.sqrt(y));var v=(p==m?-1:1)*Math.sqrt((Math.pow(c,2)*Math.pow(f,2)-Math.pow(c,2)*Math.pow(g.y,2)-Math.pow(f,2)*Math.pow(g.x,2))/(Math.pow(c,2)*Math.pow(g.y,2)+Math.pow(f,2)*Math.pow(g.x,2)));isNaN(v)&&(v=0);var b=new o.Point(v*c*g.y/f,v*-f*g.x/c),w=new o.Point((s.x+h.x)/2+Math.cos(d)*b.x-Math.sin(d)*b.y,(s.y+h.y)/2+Math.sin(d)*b.x+Math.cos(d)*b.y),x=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},E=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(x(t)*x(e))},T=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(E(t,e))},P=T([1,0],[(g.x-b.x)/c,(g.y-b.y)/f]),C=[(g.x-b.x)/c,(g.y-b.y)/f],S=[(-g.x-b.x)/c,(-g.y-b.y)/f],O=T(C,S);E(C,S)<=-1&&(O=Math.PI),E(C,S)>=1&&(O=0);var k=1-m?1:-1,I=P+k*(O/2),R=new o.Point(w.x+c*Math.cos(I),w.y+f*Math.sin(I));if(e.addMarkerAngle(R,I-k*Math.PI/2),e.addMarkerAngle(h,I-k*Math.PI),n.addPoint(h.x,h.y),null!=t){var E=c>f?c:f,M=c>f?1:c/f,A=c>f?f/c:1;t.translate(w.x,w.y),t.rotate(d),t.scale(M,A),t.arc(0,0,E,P,P+O,1-m),t.scale(1/M,1/A),t.rotate(-d),t.translate(-w.x,-w.y)}}break;case"Z":case"z":null!=t&&t.closePath(),e.current=e.start}return n},this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),e=this.PathParser.getMarkerAngles(),n=[],i=0;i<t.length;i++)n.push([t[i],e[i]]);return n}},o.Element.path.prototype=new o.Element.PathElementBase,o.Element.pattern=function(t){this.base=o.Element.ElementBase,this.base(t),this.createPattern=function(t,e){var n=this.attribute("width").toPixels("x",!0),i=this.attribute("height").toPixels("y",!0),r=new o.Element.svg;r.attributes.viewBox=new o.Property("viewBox",this.attribute("viewBox").value),r.attributes.width=new o.Property("width",n+"px"),r.attributes.height=new o.Property("height",i+"px"),r.attributes.transform=new o.Property("transform",this.attribute("patternTransform").value),r.children=this.children;var a=document.createElement("canvas");a.width=n,a.height=i;var s=a.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&s.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var l=-1;l<=1;l++)for(var u=-1;u<=1;u++)s.save(),r.attributes.x=new o.Property("x",l*a.width),r.attributes.y=new o.Property("y",u*a.height),r.render(s),s.restore();return t.createPattern(a,"repeat")}},o.Element.pattern.prototype=new o.Element.ElementBase,o.Element.marker=function(t){this.base=o.Element.ElementBase,this.base(t),this.baseRender=this.render,this.render=function(t,e,n){t.translate(e.x,e.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(n),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(t.lineWidth,t.lineWidth),t.save();var i=new o.Element.svg;i.attributes.viewBox=new o.Property("viewBox",this.attribute("viewBox").value),i.attributes.refX=new o.Property("refX",this.attribute("refX").value),i.attributes.refY=new o.Property("refY",this.attribute("refY").value),i.attributes.width=new o.Property("width",this.attribute("markerWidth").value),i.attributes.height=new o.Property("height",this.attribute("markerHeight").value),i.attributes.fill=new o.Property("fill",this.attribute("fill").valueOrDefault("black")),i.attributes.stroke=new o.Property("stroke",this.attribute("stroke").valueOrDefault("none")),i.children=this.children,i.render(t),t.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(-n),t.translate(-e.x,-e.y)}},o.Element.marker.prototype=new o.Element.ElementBase,o.Element.defs=function(t){this.base=o.Element.ElementBase,this.base(t),this.render=function(t){}},o.Element.defs.prototype=new o.Element.ElementBase,o.Element.GradientBase=function(t){this.base=o.Element.ElementBase,this.base(t),this.stops=[];for(var e=0;e<this.children.length;e++){var n=this.children[e];"stop"==n.type&&this.stops.push(n)}this.getGradient=function(){},this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")},this.attributesToInherit=["gradientUnits"],this.inheritStopContainer=function(t){for(var e=0;e<this.attributesToInherit.length;e++){var n=this.attributesToInherit[e];!this.attribute(n).hasValue()&&t.attribute(n).hasValue()&&(this.attribute(n,!0).value=t.attribute(n).value)}},this.createGradient=function(t,e,n){var i=this;this.getHrefAttribute().hasValue()&&(i=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(i));var r=function(t){return n.hasValue()?new o.Property("color",t).addOpacity(n).value:t},a=this.getGradient(t,e);if(null==a)return r(i.stops[i.stops.length-1].color);for(var s=0;s<i.stops.length;s++)a.addColorStop(i.stops[s].offset,r(i.stops[s].color));if(this.attribute("gradientTransform").hasValue()){var l=o.ViewPort.viewPorts[0],u=new o.Element.rect;u.attributes.x=new o.Property("x",-o.MAX_VIRTUAL_PIXELS/3),u.attributes.y=new o.Property("y",-o.MAX_VIRTUAL_PIXELS/3),u.attributes.width=new o.Property("width",o.MAX_VIRTUAL_PIXELS),u.attributes.height=new o.Property("height",o.MAX_VIRTUAL_PIXELS);var h=new o.Element.g;h.attributes.transform=new o.Property("transform",this.attribute("gradientTransform").value),h.children=[u];var c=new o.Element.svg;c.attributes.x=new o.Property("x",0),c.attributes.y=new o.Property("y",0),c.attributes.width=new o.Property("width",l.width),c.attributes.height=new o.Property("height",l.height),c.children=[h];var f=document.createElement("canvas");f.width=l.width,f.height=l.height;var d=f.getContext("2d");return d.fillStyle=a,c.render(d),d.createPattern(f,"no-repeat")}return a}},o.Element.GradientBase.prototype=new o.Element.ElementBase,o.Element.linearGradient=function(t){this.base=o.Element.GradientBase,this.base(t),this.attributesToInherit.push("x1"),this.attributesToInherit.push("y1"),this.attributesToInherit.push("x2"),this.attributesToInherit.push("y2"),this.getGradient=function(t,e){var n="objectBoundingBox"==this.gradientUnits()?e.getBoundingBox():null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var i="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),r="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),a="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),o="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return i==a&&r==o?null:t.createLinearGradient(i,r,a,o)}},o.Element.linearGradient.prototype=new o.Element.GradientBase,o.Element.radialGradient=function(t){this.base=o.Element.GradientBase,this.base(t),this.attributesToInherit.push("cx"),this.attributesToInherit.push("cy"),this.attributesToInherit.push("r"),this.attributesToInherit.push("fx"),this.attributesToInherit.push("fy"),this.getGradient=function(t,e){var n=e.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var i="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),r="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),a=i,o=r;this.attribute("fx").hasValue()&&(a="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(o="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var s="objectBoundingBox"==this.gradientUnits()?(n.width()+n.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return t.createRadialGradient(a,o,0,i,r,s)}},o.Element.radialGradient.prototype=new o.Element.GradientBase,o.Element.stop=function(t){this.base=o.Element.ElementBase,this.base(t),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var e=this.style("stop-color",!0);""===e.value&&(e.value="#000"),this.style("stop-opacity").hasValue()&&(e=e.addOpacity(this.style("stop-opacity"))),this.color=e.value},o.Element.stop.prototype=new o.Element.ElementBase,o.Element.AnimateBase=function(t){this.base=o.Element.ElementBase,this.base(t),o.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var t=this.attribute("attributeType").value,e=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(e,!0):this.parent.attribute(e,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(t){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+t;var e=!1;if(this.begin<this.duration){var n=this.calcValue();this.attribute("type").hasValue()&&(n=this.attribute("type").value+"("+n+")"),this.getProperty().value=n,e=!0}return e},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var t={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var e=t.progress*(this.values.value.length-1),n=Math.floor(e),i=Math.ceil(e);t.from=new o.Property("from",parseFloat(this.values.value[n])),t.to=new o.Property("to",parseFloat(this.values.value[i])),t.progress=(e-n)/(i-n)}else t.from=this.from,t.to=this.to;return t}},o.Element.AnimateBase.prototype=new o.Element.ElementBase,o.Element.animate=function(t){this.base=o.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress();return t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress+this.initialUnits}},o.Element.animate.prototype=new o.Element.AnimateBase,o.Element.animateColor=function(e){this.base=o.Element.AnimateBase,this.base(e),this.calcValue=function(){var e=this.progress(),n=new t(e.from.value),i=new t(e.to.value);if(n.ok&&i.ok){var r=n.r+(i.r-n.r)*e.progress,a=n.g+(i.g-n.g)*e.progress,o=n.b+(i.b-n.b)*e.progress;return"rgb("+parseInt(r,10)+","+parseInt(a,10)+","+parseInt(o,10)+")"}return this.attribute("from").value}},o.Element.animateColor.prototype=new o.Element.AnimateBase,o.Element.animateTransform=function(t){this.base=o.Element.AnimateBase,this.base(t),this.calcValue=function(){for(var t=this.progress(),e=o.ToNumberArray(t.from.value),n=o.ToNumberArray(t.to.value),i="",r=0;r<e.length;r++)i+=e[r]+(n[r]-e[r])*t.progress+" ";return i}},o.Element.animateTransform.prototype=new o.Element.animate,o.Element.font=function(t){this.base=o.Element.ElementBase,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var e=0;e<this.children.length;e++){var n=this.children[e];"font-face"==n.type?(this.fontFace=n,n.style("font-family").hasValue()&&(o.Definitions[n.style("font-family").value]=this)):"missing-glyph"==n.type?this.missingGlyph=n:"glyph"==n.type&&(""!=n.arabicForm?(this.isRTL=!0,this.isArabic=!0,void 0===this.glyphs[n.unicode]&&(this.glyphs[n.unicode]=[]),this.glyphs[n.unicode][n.arabicForm]=n):this.glyphs[n.unicode]=n)}},o.Element.font.prototype=new o.Element.ElementBase,o.Element.fontface=function(t){this.base=o.Element.ElementBase,this.base(t),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},o.Element.fontface.prototype=new o.Element.ElementBase,o.Element.missingglyph=function(t){this.base=o.Element.path,this.base(t),this.horizAdvX=0},o.Element.missingglyph.prototype=new o.Element.path,o.Element.glyph=function(t){this.base=o.Element.path,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},o.Element.glyph.prototype=new o.Element.path,o.Element.text=function(t){this.captureTextNodes=!0,this.base=o.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t);var e=this.style("dominant-baseline").toTextBaseline();null==e&&(e=this.style("alignment-baseline").toTextBaseline()),null!=e&&(t.textBaseline=e)},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),n=this.parent.style("font-size").numValueOrDefault(o.Font.Parse(o.ctx.font).fontSize);return new o.BoundingBox(t,e-n,t+Math.floor(2*n/3)*this.children[0].getText().length,e)},this.renderChildren=function(t){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),this.x+=this.getAnchorDelta(t,this,0);for(var e=0;e<this.children.length;e++)this.renderChild(t,this,this,e)},this.getAnchorDelta=function(t,e,n){var i=this.style("text-anchor").valueOrDefault("start");if("start"!=i){for(var r=0,a=n;a<e.children.length;a++){var o=e.children[a];if(a>n&&o.attribute("x").hasValue())break;r+=o.measureTextRecursive(t)}return-1*("end"==i?r:r/2)}return 0},this.renderChild=function(t,e,n,i){var r=n.children[i];r.attribute("x").hasValue()?(r.x=r.attribute("x").toPixels("x")+e.getAnchorDelta(t,n,i),r.attribute("dx").hasValue()&&(r.x+=r.attribute("dx").toPixels("x"))):(r.attribute("dx").hasValue()&&(e.x+=r.attribute("dx").toPixels("x")),r.x=e.x),e.x=r.x+r.measureText(t),r.attribute("y").hasValue()?(r.y=r.attribute("y").toPixels("y"),r.attribute("dy").hasValue()&&(r.y+=r.attribute("dy").toPixels("y"))):(r.attribute("dy").hasValue()&&(e.y+=r.attribute("dy").toPixels("y")),r.y=e.y),e.y=r.y,r.render(t);for(var i=0;i<r.children.length;i++)e.renderChild(t,e,r,i)}},o.Element.text.prototype=new o.Element.RenderedElementBase,o.Element.TextElementBase=function(t){this.base=o.Element.RenderedElementBase,this.base(t),this.getGlyph=function(t,e,n){var i=e[n],r=null;if(t.isArabic){var a="isolated";(0==n||" "==e[n-1])&&n<e.length-2&&" "!=e[n+1]&&(a="terminal"),n>0&&" "!=e[n-1]&&n<e.length-2&&" "!=e[n+1]&&(a="medial"),n>0&&" "!=e[n-1]&&(n==e.length-1||" "==e[n+1])&&(a="initial"),void 0!==t.glyphs[i]&&null==(r=t.glyphs[i][a])&&"glyph"==t.glyphs[i].type&&(r=t.glyphs[i])}else r=t.glyphs[i];return null==r&&(r=t.missingGlyph),r},this.renderChildren=function(t){var e=this.parent.style("font-family").getDefinition();if(null==e)""!=t.fillStyle&&t.fillText(o.compressSpaces(this.getText()),this.x,this.y),""!=t.strokeStyle&&t.strokeText(o.compressSpaces(this.getText()),this.x,this.y);else{var n=this.parent.style("font-size").numValueOrDefault(o.Font.Parse(o.ctx.font).fontSize),i=this.parent.style("font-style").valueOrDefault(o.Font.Parse(o.ctx.font).fontStyle),r=this.getText();e.isRTL&&(r=r.split("").reverse().join(""));for(var a=o.ToNumberArray(this.parent.attribute("dx").value),s=0;s<r.length;s++){var l=this.getGlyph(e,r,s),u=n/e.fontFace.unitsPerEm;t.translate(this.x,this.y),t.scale(u,-u);var h=t.lineWidth;t.lineWidth=t.lineWidth*e.fontFace.unitsPerEm/n,"italic"==i&&t.transform(1,0,.4,1,0,0),l.render(t),"italic"==i&&t.transform(1,0,-.4,1,0,0),t.lineWidth=h,t.scale(1/u,-1/u),t.translate(-this.x,-this.y),this.x+=n*(l.horizAdvX||e.horizAdvX)/e.fontFace.unitsPerEm,void 0===a[s]||isNaN(a[s])||(this.x+=a[s])}}},this.getText=function(){},this.measureTextRecursive=function(t){for(var e=this.measureText(t),n=0;n<this.children.length;n++)e+=this.children[n].measureTextRecursive(t);return e},this.measureText=function(t){var e=this.parent.style("font-family").getDefinition();if(null!=e){var n=this.parent.style("font-size").numValueOrDefault(o.Font.Parse(o.ctx.font).fontSize),i=0,r=this.getText();e.isRTL&&(r=r.split("").reverse().join(""));for(var a=o.ToNumberArray(this.parent.attribute("dx").value),s=0;s<r.length;s++)i+=(this.getGlyph(e,r,s).horizAdvX||e.horizAdvX)*n/e.fontFace.unitsPerEm,void 0===a[s]||isNaN(a[s])||(i+=a[s]);return i}var l=o.compressSpaces(this.getText());if(!t.measureText)return 10*l.length;t.save(),this.setContext(t);var u=t.measureText(l).width;return t.restore(),u}},o.Element.TextElementBase.prototype=new o.Element.RenderedElementBase,o.Element.tspan=function(t){this.captureTextNodes=!0,this.base=o.Element.TextElementBase,this.base(t),this.text=o.compressSpaces(t.value||t.text||t.textContent||""),this.getText=function(){return this.children.length>0?"":this.text}},o.Element.tspan.prototype=new o.Element.TextElementBase,o.Element.tref=function(t){this.base=o.Element.TextElementBase,this.base(t),this.getText=function(){var t=this.getHrefAttribute().getDefinition();if(null!=t)return t.children[0].getText()}},o.Element.tref.prototype=new o.Element.TextElementBase,o.Element.a=function(t){this.base=o.Element.TextElementBase,this.base(t),this.hasText=t.childNodes.length>0;for(var e=0;e<t.childNodes.length;e++)3!=t.childNodes[e].nodeType&&(this.hasText=!1);this.text=this.hasText?t.childNodes[0].value:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(t){if(this.hasText){this.baseRenderChildren(t);var e=new o.Property("fontSize",o.Font.Parse(o.ctx.font).fontSize);o.Mouse.checkBoundingBox(this,new o.BoundingBox(this.x,this.y-e.toPixels("y"),this.x+this.measureText(t),this.y))}else if(this.children.length>0){var n=new o.Element.g;n.children=this.children,n.parent=this,n.render(t)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){o.ctx.canvas.style.cursor="pointer"}},o.Element.a.prototype=new o.Element.TextElementBase,o.Element.image=function(t){this.base=o.Element.RenderedElementBase,this.base(t);var e=this.getHrefAttribute().value;if(""!=e){var n=e.match(/\.svg$/);if(o.Images.push(this),this.loaded=!1,n)this.img=o.ajax(e),this.loaded=!0;else{this.img=document.createElement("img"),1==o.opts.useCORS&&(this.img.crossOrigin="Anonymous");var i=this;this.img.onload=function(){i.loaded=!0},this.img.onerror=function(){o.log('ERROR: image "'+e+'" not found'),i.loaded=!0},this.img.src=e}this.renderChildren=function(t){var e=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),a=this.attribute("height").toPixels("y");0!=r&&0!=a&&(t.save(),n?t.drawSvg(this.img,e,i,r,a):(t.translate(e,i),o.AspectRatio(t,this.attribute("preserveAspectRatio").value,r,this.img.width,a,this.img.height,0,0),t.drawImage(this.img,0,0)),t.restore())},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),n=this.attribute("width").toPixels("x"),i=this.attribute("height").toPixels("y");return new o.BoundingBox(t,e,t+n,e+i)}}},o.Element.image.prototype=new o.Element.RenderedElementBase,o.Element.g=function(t){this.base=o.Element.RenderedElementBase,this.base(t),this.getBoundingBox=function(){for(var t=new o.BoundingBox,e=0;e<this.children.length;e++)t.addBoundingBox(this.children[e].getBoundingBox());return t}},o.Element.g.prototype=new o.Element.RenderedElementBase,o.Element.symbol=function(t){this.base=o.Element.RenderedElementBase,this.base(t),this.render=function(t){}},o.Element.symbol.prototype=new o.Element.RenderedElementBase,o.Element.style=function(t){this.base=o.Element.ElementBase,this.base(t);for(var e="",i=0;i<t.childNodes.length;i++)e+=t.childNodes[i].data;e=e.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"");for(var r=(e=o.compressSpaces(e)).split("}"),i=0;i<r.length;i++)if(""!=o.trim(r[i]))for(var a=r[i].split("{"),s=a[0].split(","),l=a[1].split(";"),u=0;u<s.length;u++){var h=o.trim(s[u]);if(""!=h){for(var c=o.Styles[h]||{},f=0;f<l.length;f++){var d=l[f].indexOf(":"),p=l[f].substr(0,d),m=l[f].substr(d+1,l[f].length-d);null!=p&&null!=m&&(c[o.trim(p)]=new o.Property(o.trim(p),o.trim(m)))}if(o.Styles[h]=c,o.StylesSpecificity[h]=n(h),"@font-face"==h)for(var g=c["font-family"].value.replace(/"/g,""),y=c.src.value.split(","),v=0;v<y.length;v++)if(y[v].indexOf('format("svg")')>0)for(var b=y[v].indexOf("url"),w=y[v].indexOf(")",b),x=y[v].substr(b+5,w-b-6),E=o.parseXml(o.ajax(x)).getElementsByTagName("font"),T=0;T<E.length;T++){var P=o.CreateElement(E[T]);o.Definitions[g]=P}}}},o.Element.style.prototype=new o.Element.ElementBase,o.Element.use=function(t){this.base=o.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.attribute("x").hasValue()&&t.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&t.translate(0,this.attribute("y").toPixels("y"))};var e=this.getHrefAttribute().getDefinition();this.path=function(t){null!=e&&e.path(t)},this.getBoundingBox=function(){if(null!=e)return e.getBoundingBox()},this.renderChildren=function(t){if(null!=e){var n=e;"symbol"==e.type&&((n=new o.Element.svg).type="svg",n.attributes.viewBox=new o.Property("viewBox",e.attribute("viewBox").value),n.attributes.preserveAspectRatio=new o.Property("preserveAspectRatio",e.attribute("preserveAspectRatio").value),n.attributes.overflow=new o.Property("overflow",e.attribute("overflow").value),n.children=e.children),"svg"==n.type&&(this.attribute("width").hasValue()&&(n.attributes.width=new o.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(n.attributes.height=new o.Property("height",this.attribute("height").value)));var i=n.parent;n.parent=null,n.render(t),n.parent=i}}},o.Element.use.prototype=new o.Element.RenderedElementBase,o.Element.mask=function(t){this.base=o.Element.ElementBase,this.base(t),this.apply=function(t,e){var n=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),a=this.attribute("height").toPixels("y");if(0==r&&0==a){for(var s=new o.BoundingBox,l=0;l<this.children.length;l++)s.addBoundingBox(this.children[l].getBoundingBox());var n=Math.floor(s.x1),i=Math.floor(s.y1),r=Math.floor(s.width()),a=Math.floor(s.height())}var u=e.attribute("mask").value;e.attribute("mask").value="";var h=document.createElement("canvas");h.width=n+r,h.height=i+a;var c=h.getContext("2d");this.renderChildren(c);var f=document.createElement("canvas");f.width=n+r,f.height=i+a;var d=f.getContext("2d");e.render(d),d.globalCompositeOperation="destination-in",d.fillStyle=c.createPattern(h,"no-repeat"),d.fillRect(0,0,n+r,i+a),t.fillStyle=d.createPattern(f,"no-repeat"),t.fillRect(0,0,n+r,i+a),e.attribute("mask").value=u},this.render=function(t){}},o.Element.mask.prototype=new o.Element.ElementBase,o.Element.clipPath=function(t){this.base=o.Element.ElementBase,this.base(t),this.apply=function(t){var e=CanvasRenderingContext2D.prototype.beginPath;CanvasRenderingContext2D.prototype.beginPath=function(){};var n=CanvasRenderingContext2D.prototype.closePath;CanvasRenderingContext2D.prototype.closePath=function(){},e.call(t);for(var i=0;i<this.children.length;i++){var r=this.children[i];if(void 0!==r.path){var a=null;r.style("transform",!1,!0).hasValue()&&(a=new o.Transform(r.style("transform",!1,!0).value)).apply(t),r.path(t),CanvasRenderingContext2D.prototype.closePath=n,a&&a.unapply(t)}}n.call(t),t.clip(),CanvasRenderingContext2D.prototype.beginPath=e,CanvasRenderingContext2D.prototype.closePath=n},this.render=function(t){}},o.Element.clipPath.prototype=new o.Element.ElementBase,o.Element.filter=function(t){this.base=o.Element.ElementBase,this.base(t),this.apply=function(t,e){var n=e.getBoundingBox(),i=Math.floor(n.x1),r=Math.floor(n.y1),a=Math.floor(n.width()),o=Math.floor(n.height()),s=e.style("filter").value;e.style("filter").value="";for(var l=0,u=0,h=0;h<this.children.length;h++){var c=this.children[h].extraFilterDistance||0;l=Math.max(l,c),u=Math.max(u,c)}var f=document.createElement("canvas");f.width=a+2*l,f.height=o+2*u;var d=f.getContext("2d");d.translate(-i+l,-r+u),e.render(d);for(h=0;h<this.children.length;h++)"function"==typeof this.children[h].apply&&this.children[h].apply(d,0,0,a+2*l,o+2*u);t.drawImage(f,0,0,a+2*l,o+2*u,i-l,r-u,a+2*l,o+2*u),e.style("filter",!0).value=s},this.render=function(t){}},o.Element.filter.prototype=new o.Element.ElementBase,o.Element.feMorphology=function(t){this.base=o.Element.ElementBase,this.base(t),this.apply=function(t,e,n,i,r){}},o.Element.feMorphology.prototype=new o.Element.ElementBase,o.Element.feComposite=function(t){this.base=o.Element.ElementBase,this.base(t),this.apply=function(t,e,n,i,r){}},o.Element.feComposite.prototype=new o.Element.ElementBase,o.Element.feColorMatrix=function(t){function e(t,e,n,i,r,a){return t[n*i*4+4*e+a]}function n(t,e,n,i,r,a,o){t[n*i*4+4*e+a]=o}function i(t,e){var n=r[t];return n*(n<0?e-255:e)}this.base=o.Element.ElementBase,this.base(t);var r=o.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var a=r[0];r=[.213+.787*a,.715-.715*a,.072-.072*a,0,0,.213-.213*a,.715+.285*a,.072-.072*a,0,0,.213-.213*a,.715-.715*a,.072+.928*a,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var s=r[0]*Math.PI/180,l=function(t,e,n){return t+Math.cos(s)*e+Math.sin(s)*n};r=[l(.213,.787,-.213),l(.715,-.715,-.715),l(.072,-.072,.928),0,0,l(.213,-.213,.143),l(.715,.285,.14),l(.072,-.072,-.283),0,0,l(.213,-.213,-.787),l(.715,-.715,.715),l(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.apply=function(t,r,a,o,s){for(var l=t.getImageData(0,0,o,s),a=0;a<s;a++)for(var r=0;r<o;r++){var u=e(l.data,r,a,o,0,0),h=e(l.data,r,a,o,0,1),c=e(l.data,r,a,o,0,2),f=e(l.data,r,a,o,0,3);n(l.data,r,a,o,0,0,i(0,u)+i(1,h)+i(2,c)+i(3,f)+i(4,1)),n(l.data,r,a,o,0,1,i(5,u)+i(6,h)+i(7,c)+i(8,f)+i(9,1)),n(l.data,r,a,o,0,2,i(10,u)+i(11,h)+i(12,c)+i(13,f)+i(14,1)),n(l.data,r,a,o,0,3,i(15,u)+i(16,h)+i(17,c)+i(18,f)+i(19,1))}t.clearRect(0,0,o,s),t.putImageData(l,0,0)}},o.Element.feColorMatrix.prototype=new o.Element.ElementBase,o.Element.feGaussianBlur=function(t){this.base=o.Element.ElementBase,this.base(t),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(t,n,i,r,a){void 0!==e.canvasRGBA?(t.canvas.id=o.UniqueId(),t.canvas.style.display="none",document.body.appendChild(t.canvas),e.canvasRGBA(t.canvas.id,n,i,r,a,this.blurRadius),document.body.removeChild(t.canvas)):o.log("ERROR: StackBlur.js must be included for blur to work")}},o.Element.feGaussianBlur.prototype=new o.Element.ElementBase,o.Element.title=function(t){},o.Element.title.prototype=new o.Element.ElementBase,o.Element.desc=function(t){},o.Element.desc.prototype=new o.Element.ElementBase,o.Element.MISSING=function(t){o.log("ERROR: Element '"+t.nodeName+"' not yet implemented.")},o.Element.MISSING.prototype=new o.Element.ElementBase,o.CreateElement=function(t){var e=t.nodeName.replace(/^[^:]+:/,"");e=e.replace(/\-/g,"");var n=null;return n=void 0!==o.Element[e]?new o.Element[e](t):new o.Element.MISSING(t),n.type=t.nodeName,n},o.load=function(t,e){o.loadXml(t,o.ajax(e))},o.loadXml=function(t,e){o.loadXmlDoc(t,o.parseXml(e))},o.loadXmlDoc=function(t,e){o.init(t);var n=function(e){for(var n=t.canvas;n;)e.x-=n.offsetLeft,e.y-=n.offsetTop,n=n.offsetParent;return window.scrollX&&(e.x+=window.scrollX),window.scrollY&&(e.y+=window.scrollY),e};1!=o.opts.ignoreMouse&&(t.canvas.onclick=function(t){var e=n(new o.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));o.Mouse.onclick(e.x,e.y)},t.canvas.onmousemove=function(t){var e=n(new o.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));o.Mouse.onmousemove(e.x,e.y)});var i=o.CreateElement(e.documentElement);i.root=!0,i.addStylesFromStyleDefinition();var r=!0,a=function(){o.ViewPort.Clear(),t.canvas.parentNode&&o.ViewPort.SetCurrent(t.canvas.parentNode.clientWidth,t.canvas.parentNode.clientHeight),1!=o.opts.ignoreDimensions&&(i.style("width").hasValue()&&(t.canvas.width=i.style("width").toPixels("x"),t.canvas.style.width=t.canvas.width+"px"),i.style("height").hasValue()&&(t.canvas.height=i.style("height").toPixels("y"),t.canvas.style.height=t.canvas.height+"px"));var n=t.canvas.clientWidth||t.canvas.width,a=t.canvas.clientHeight||t.canvas.height;if(1==o.opts.ignoreDimensions&&i.style("width").hasValue()&&i.style("height").hasValue()&&(n=i.style("width").toPixels("x"),a=i.style("height").toPixels("y")),o.ViewPort.SetCurrent(n,a),null!=o.opts.offsetX&&(i.attribute("x",!0).value=o.opts.offsetX),null!=o.opts.offsetY&&(i.attribute("y",!0).value=o.opts.offsetY),null!=o.opts.scaleWidth||null!=o.opts.scaleHeight){var s=null,l=null,u=o.ToNumberArray(i.attribute("viewBox").value);null!=o.opts.scaleWidth&&(i.attribute("width").hasValue()?s=i.attribute("width").toPixels("x")/o.opts.scaleWidth:isNaN(u[2])||(s=u[2]/o.opts.scaleWidth)),null!=o.opts.scaleHeight&&(i.attribute("height").hasValue()?l=i.attribute("height").toPixels("y")/o.opts.scaleHeight:isNaN(u[3])||(l=u[3]/o.opts.scaleHeight)),null==s&&(s=l),null==l&&(l=s),i.attribute("width",!0).value=o.opts.scaleWidth,i.attribute("height",!0).value=o.opts.scaleHeight,i.style("transform",!0,!0).value+=" scale("+1/s+","+1/l+")"}1!=o.opts.ignoreClear&&t.clearRect(0,0,n,a),i.render(t),r&&(r=!1,"function"==typeof o.opts.renderCallback&&o.opts.renderCallback(e))},s=!0;o.ImagesLoaded()&&(s=!1,a()),o.intervalID=setInterval(function(){var t=!1;if(s&&o.ImagesLoaded()&&(s=!1,t=!0),1!=o.opts.ignoreMouse&&(t|=o.Mouse.hasEvents()),1!=o.opts.ignoreAnimation)for(var e=0;e<o.Animations.length;e++)t|=o.Animations[e].update(1e3/o.FRAMERATE);"function"==typeof o.opts.forceRedraw&&1==o.opts.forceRedraw()&&(t=!0),t&&(a(),o.Mouse.runEvents())},1e3/o.FRAMERATE)},o.stop=function(){o.intervalID&&clearInterval(o.intervalID)},o.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(t,e){this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(t,e){this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInPath&&e.isPointInPath(i.x,i.y)&&(this.eventElements[n]=t)}},this.checkBoundingBox=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInBox(i.x,i.y)&&(this.eventElements[n]=t)}},this.runEvents=function(){o.ctx.canvas.style.cursor="";for(var t=0;t<this.events.length;t++)for(var e=this.events[t],n=this.eventElements[t];n;)e.run(n),n=n.parent;this.events=[],this.eventElements=[]}},o}var a,o=function t(e,n,i){if(null!=e||null!=n||null!=i){"string"==typeof e&&(e=document.getElementById(e)),null!=e.svg&&e.svg.stop();var a=r(i||{});1==e.childNodes.length&&"OBJECT"==e.childNodes[0].nodeName||(e.svg=a);var o=e.getContext("2d");void 0!==n.documentElement?a.loadXmlDoc(o,n):"<"==n.substr(0,1)?a.loadXml(o,n):a.load(o,n)}else for(var s=document.querySelectorAll("svg"),l=0;l<s.length;l++){var u=s[l],h=document.createElement("canvas");h.width=u.clientWidth,h.height=u.clientHeight,u.parentNode.insertBefore(h,u),u.parentNode.removeChild(u);var c=document.createElement("div");c.appendChild(u),t(h,c.innerHTML)}};void 0!==Element.prototype.matches?a=function(t,e){return t.matches(e)}:void 0!==Element.prototype.webkitMatchesSelector?a=function(t,e){return t.webkitMatchesSelector(e)}:void 0!==Element.prototype.mozMatchesSelector?a=function(t,e){return t.mozMatchesSelector(e)}:void 0!==Element.prototype.msMatchesSelector?a=function(t,e){return t.msMatchesSelector(e)}:void 0!==Element.prototype.oMatchesSelector?a=function(t,e){return t.oMatchesSelector(e)}:("function"!=typeof jQuery&&"function"!=typeof Zepto||(a=function(t,e){return $(t).is(e)}),void 0===a&&(a=Sizzle.matchesSelector));var s=/(\[[^\]]+\])/g,l=/(#[^\s\+>~\.\[:]+)/g,u=/(\.[^\s\+>~\.\[:]+)/g,h=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,c=/(:[\w-]+\([^\)]*\))/gi,f=/(:[^\s\+>~\.\[:]+)/g,d=/([^\s\+>~\.\[:]+)/g;return"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,e,n,i,r,a){var s={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:e,offsetY:n,scaleWidth:i,scaleHeight:r};for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l]);o(this.canvas,t,s)}),o})}),rs=function(t){t.find(".canvg").each(function(){c(jQuery(this))});var e=d(t);return Jo(e,{useCORS:!0,allowTaint:!1,logging:!1}).then(function(t){return document.body.removeChild(e),console.log("html2canvas done",t),jQuery("#supercontenedor").css({opacity:"1"}),t.toDataURL("image/png")})},as={html2canvas:Jo,infoScreenShot:rs,canvg:is,hiddenClone:d,svgAImg:c,svgACanvas:f};t.html2canvas=Jo,t.infoScreenShot=rs,t.canvg=is,t.hiddenClone=d,t.svgAImg=c,t.svgACanvas=f,t.default=as,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ig_screenshot.min.js.map
